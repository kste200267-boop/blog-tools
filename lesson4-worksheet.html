<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>10ë…„ íˆ¬ì ì„œë°”ì´ë²Œ : ë„íŒŒë¯¼ ì—ë””ì…˜</title>
    <!-- í°íŠ¸ ë° ìŠ¤íƒ€ì¼ -->
    <link href="https://fonts.googleapis.com/css2?family=Black+Han+Sans&family=Do+Hyeon&family=Noto+Sans+KR:wght@300;400;700;900&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        /* ê¸°ë³¸ ì„¤ì • */
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #111827; color: #f3f4f6; user-select: none; -webkit-tap-highlight-color: transparent; }
        .font-game { font-family: 'Black Han Sans', sans-serif; }
        .font-retro { font-family: 'Do Hyeon', sans-serif; }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes pulse-red { 0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); } 70% { box-shadow: 0 0 0 20px rgba(239, 68, 68, 0); } }
        @keyframes slide-up { from { transform: translateY(100%); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes zoom-in { from { transform: scale(0.9); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes shake { 0%, 100% { transform: translateX(0); } 10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); } 20%, 40%, 60%, 80% { transform: translateX(5px); } }

        .animate-slide-up { animation: slide-up 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        .animate-zoom { animation: zoom-in 0.3s ease-out forwards; }
        .animate-shake { animation: shake 0.5s; }
        
        /* ì»¤ìŠ¤í…€ ìŠ¤í¬ë¡¤ë°” */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #1f2937; }
        ::-webkit-scrollbar-thumb { background: #4b5563; border-radius: 3px; }

        /* ê²Œì„ UI ìš”ì†Œ */
        .glass-panel { background: rgba(31, 41, 55, 0.8); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .asset-slider { -webkit-appearance: none; width: 100%; height: 8px; border-radius: 5px; background: #374151; outline: none; }
        .asset-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 24px; height: 24px; border-radius: 50%; background: #3b82f6; cursor: pointer; border: 2px solid white; box-shadow: 0 2px 6px rgba(0,0,0,0.3); transition: transform .1s; }
        .asset-slider::-webkit-slider-thumb:active { transform: scale(1.2); }
        
        /* ëŒ€ì¶œ(ìŒìˆ˜) ìŠ¬ë¼ì´ë” ìŠ¤íƒ€ì¼ */
        .slider-debt::-webkit-slider-thumb { background: #ef4444 !important; }
        .bg-debt { background-color: rgba(239, 68, 68, 0.2); border-color: rgba(239, 68, 68, 0.5); }

        /* ë‰´ìŠ¤ ëª¨ë‹¬ ë°°ê²½ ì´ë¯¸ì§€ìš© */
        .news-bg { background-size: cover; background-position: center; transition: all 0.5s; }
        .news-overlay { background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.6) 50%, rgba(0,0,0,0.3) 100%); }

        /* ì›Œí„°ë§ˆí¬ ìŠ¤íƒ€ì¼ */
        .watermark {
            position: fixed; bottom: 10px; right: 10px; 
            font-size: 10px; color: rgba(255,255,255,0.2); 
            font-weight: bold; pointer-events: none; z-index: 9999;
            background: rgba(0,0,0,0.3);
            padding: 4px 10px; border-radius: 15px;
        }
    
/* ì „ì²´í™”ë©´ ì´íƒˆ ê²½ê³  */
.fs-warning-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.92);z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem;animation:fadeIn .3s}
.fs-warning-overlay .warn-icon{font-size:4rem}
.fs-warning-overlay .warn-title{font-size:1.5rem;font-weight:900;color:#fbbf24}
.fs-warning-overlay .warn-msg{font-size:1rem;color:#94a3b8;text-align:center;max-width:320px;line-height:1.6}
.fs-warning-overlay .warn-btn{padding:14px 40px;background:linear-gradient(135deg,#3b82f6,#8b5cf6);border:none;border-radius:12px;color:#fff;font-size:1.1rem;font-weight:700;cursor:pointer;transition:transform .2s}
.fs-warning-overlay .warn-btn:hover{transform:scale(1.05)}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.blog-badge{position:fixed;bottom:12px;right:12px;z-index:100;background:rgba(15,23,42,0.85);border:1px solid #334155;border-radius:10px;padding:6px 14px;font-size:0.75rem;color:#94a3b8;text-decoration:none;backdrop-filter:blur(8px);transition:all .3s;display:flex;align-items:center;gap:6px}
.blog-badge:hover{background:rgba(59,130,246,0.2);border-color:#3b82f6;color:#60a5fa}

</style>
</head>
<body class="overflow-x-hidden min-h-screen flex flex-col select-none" oncontextmenu="return false" ondragstart="return false" onselectstart="return false">

    <!-- ì›Œí„°ë§ˆí¬ -->
    <div class="watermark">Designed by ê²½ë¶êµìœ¡ì²­ êµì‚¬ ê¹€ìŠ¤ë°ë°˜</div>

    <!-- [Intro Screen] -->
    <div id="screen-intro" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-900 p-6 text-center">
        <div class="mb-2 text-yellow-400 font-retro text-xl animate-bounce">AIEP ê²½ì œ ì‹œë®¬ë ˆì´ì…˜</div>
        <h1 class="font-game text-5xl md:text-7xl text-transparent bg-clip-text bg-gradient-to-r from-red-500 via-yellow-500 to-orange-500 mb-6 drop-shadow-lg leading-tight">
            ìì‚°ì˜ ì‹ <br><span class="text-3xl md:text-5xl text-white">ìµìŠ¤íŠ¸ë¦¼ ì—ë””ì…˜</span>
        </h1>
        <p class="text-slate-400 mb-8 max-w-md break-keep leading-relaxed text-sm md:text-base">
            <b>1ì–µ ì›</b>ìœ¼ë¡œ ì‹œì‘í•´ <b>10ë…„</b>ì„ ë²„í‹°ì„¸ìš”.<br>
            ì „ìŸ, íŒ¬ë°ë¯¹, ê¸°ìˆ  í˜ëª… ë“± <b>ê±°ëŒ€í•œ ì‚¬ê±´</b>ë“¤ì´ ë‹¹ì‹ ì˜ ìì‚°ì„ ìš”ë™ì¹˜ê²Œ í•  ê²ƒì…ë‹ˆë‹¤.<br>
            <span class="text-red-400 font-bold">ëŒ€ì¶œ(ë ˆë²„ë¦¬ì§€)</span>ì€ ì–‘ë‚ ì˜ ê²€ì…ë‹ˆë‹¤. ì¤€ë¹„ë˜ì…¨ë‚˜ìš”?
        </p>
        
        <button onclick="document.documentElement.requestFullscreen().catch(function(){});startGame()" class="w-full max-w-xs py-4 bg-gradient-to-r from-red-600 to-orange-600 rounded-2xl font-game text-2xl shadow-lg hover:scale-105 transition-transform active:scale-95 border-2 border-red-400/50 text-white">
            ì§€ì˜¥ì˜ íˆ¬ì ì‹œì‘ ğŸ”¥
        </button>
    </div>

    <!-- [Main Game] -->
    <div id="screen-game" class="hidden flex-1 flex flex-col max-w-3xl w-full mx-auto p-4 pb-28">
        
        <!-- ì •ë³´ë°” -->
        <div class="flex justify-between items-end mb-4 border-b border-slate-700 pb-2">
            <div>
                <span class="text-xs text-slate-400 block mb-1">Current Year</span>
                <span class="font-game text-3xl text-yellow-400"><span id="display-year">1</span>ë…„ì°¨</span>
            </div>
            <div class="text-right">
                <span class="text-xs text-slate-400 block mb-1">Net Equity (ìˆœìì‚°)</span>
                <span id="display-total" class="font-retro text-3xl text-emerald-400">10,000</span>
                <span class="text-sm text-emerald-600">ë§Œì›</span>
            </div>
        </div>

        <!-- ì°¨íŠ¸ -->
        <div class="glass-panel rounded-xl p-3 mb-4 h-56 relative shadow-inner bg-slate-900/50">
            <canvas id="assetChart"></canvas>
            <div id="bankruptcy-overlay" class="hidden absolute inset-0 bg-black/80 flex flex-col items-center justify-center z-10 animate-zoom">
                <div class="text-6xl mb-2">â˜ ï¸</div>
                <div class="text-red-500 font-game text-5xl mb-2">íŒŒ ì‚°</div>
                <div class="text-slate-400 text-sm">ë¹šì„ ê°ë‹¹í•˜ì§€ ëª»í–ˆìŠµë‹ˆë‹¤...</div>
            </div>
        </div>

        <!-- í¬íŠ¸í´ë¦¬ì˜¤ ì¡°ì ˆ -->
        <div class="space-y-4">
            <div class="flex justify-between items-center px-1">
                <h3 class="font-game text-xl text-white flex items-center gap-2">
                    ğŸ’¼ í¬íŠ¸í´ë¦¬ì˜¤ 
                    <span id="leverage-badge" class="hidden text-[10px] font-bold text-red-400 bg-red-900/30 px-2 py-0.5 rounded border border-red-500/50 animate-pulse">âš¡ ë ˆë²„ë¦¬ì§€ ON</span>
                </h3>
                <span class="text-xs text-slate-500">ìˆœìì‚° ëŒ€ë¹„ ë¹„ì¤‘</span>
            </div>

            <div class="grid grid-cols-1 gap-4">
                <!-- ì˜ˆê¸ˆ/ëŒ€ì¶œ ìŠ¬ë¼ì´ë” -->
                <div id="panel-savings" class="bg-slate-800 rounded-xl p-4 border border-slate-700 transition-colors duration-300">
                    <div class="flex justify-between mb-3 items-center">
                        <label class="font-bold text-blue-300 flex flex-col">
                            <span class="flex items-center gap-2 text-lg">ğŸ¦ ì˜ˆê¸ˆ / ëŒ€ì¶œ</span>
                            <span id="savings-status" class="text-xs text-slate-400 font-normal">ì•ˆì „ ìì‚°</span>
                        </label>
                        <span class="font-retro text-2xl text-white transition-colors" id="text-savings"><span id="val-savings">25</span>%</span>
                    </div>
                    <input type="range" min="-100" max="100" value="25" id="slider-savings" class="asset-slider bg-blue-900/50 w-full" oninput="updateAllocation('savings', this.value)">
                    <div class="flex justify-between text-[10px] text-slate-500 mt-2 px-1 font-bold">
                        <span class="text-red-400">â—€ ëŒ€ì¶œ (ì´ì ë°œìƒ)</span>
                        <span class="text-blue-400">ì €ì¶• (ì´ì ìˆ˜ìµ) â–¶</span>
                    </div>
                </div>
                
                <!-- ë‹¤ë¥¸ ìì‚°ë“¤ -->
                <div class="grid grid-cols-2 gap-3">
                    <div class="bg-slate-800 rounded-xl p-3 border border-slate-700">
                        <div class="flex justify-between mb-2">
                            <label class="font-bold text-red-300">ğŸ“ˆ ì£¼ì‹</label>
                            <span class="font-retro text-white"><span id="val-stocks">25</span>%</span>
                        </div>
                        <input type="range" min="0" max="200" value="25" class="asset-slider bg-red-900/50" oninput="updateAllocation('stocks', this.value)">
                    </div>
                    <div class="bg-slate-800 rounded-xl p-3 border border-slate-700">
                        <div class="flex justify-between mb-2">
                            <label class="font-bold text-amber-300">ğŸ¢ ë¶€ë™ì‚°</label>
                            <span class="font-retro text-white"><span id="val-realestate">25</span>%</span>
                        </div>
                        <input type="range" min="0" max="200" value="25" class="asset-slider bg-amber-900/50" style="--thumb-color: #f59e0b" oninput="updateAllocation('realestate', this.value)">
                    </div>
                    <div class="bg-slate-800 rounded-xl p-3 border border-slate-700">
                        <div class="flex justify-between mb-2">
                            <label class="font-bold text-purple-300">ğŸš€ ì½”ì¸</label>
                            <span class="font-retro text-white"><span id="val-crypto">15</span>%</span>
                        </div>
                        <input type="range" min="0" max="200" value="15" class="asset-slider" oninput="updateAllocation('crypto', this.value)">
                    </div>
                    <div class="bg-slate-800 rounded-xl p-3 border border-slate-700">
                        <div class="flex justify-between mb-2">
                            <label class="font-bold text-yellow-300">ğŸ¥‡ ê¸ˆ</label>
                            <span class="font-retro text-white"><span id="val-gold">10</span>%</span>
                        </div>
                        <input type="range" min="0" max="200" value="10" class="asset-slider" oninput="updateAllocation('gold', this.value)">
                    </div>
                </div>
            </div>

            <!-- í•©ê³„ ê²€ì¦ -->
            <div class="text-center mt-4 p-3 rounded-xl bg-slate-900 border border-slate-800">
                <div id="alloc-warning" class="hidden">
                    <span class="text-sm font-bold text-red-400 animate-pulse block mb-1">âš ï¸ í•©ê³„ê°€ 100%ê°€ ì•„ë‹™ë‹ˆë‹¤!</span>
                    <span class="text-xs text-slate-400">í˜„ì¬ í•©ê³„: <span id="total-alloc-warn" class="text-red-300 text-lg font-retro">100</span>%</span>
                </div>
                <div id="alloc-ok" class="block">
                    <span class="text-sm font-bold text-emerald-400 block mb-1">âœ… íˆ¬ì ì¤€ë¹„ ì™„ë£Œ</span>
                    <span class="text-xs text-slate-500">ì´ íˆ¬ì ë¹„ì¤‘: <span id="leverage-ratio" class="text-slate-300 font-bold">100</span>%</span>
                </div>
            </div>
        </div>
    </div>

    <!-- í•˜ë‹¨ ë²„íŠ¼ -->
    <div id="btn-area" class="fixed bottom-0 left-0 w-full p-4 bg-slate-900/90 backdrop-blur border-t border-slate-700 z-30 hidden">
        <div class="max-w-3xl mx-auto">
            <button id="btn-next" onclick="calculateTurn()" class="w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-xl font-game text-2xl text-white shadow-lg active:scale-95 transition-all">
                íˆ¬ì ì‹¤í–‰ (ë‹¤ìŒ í•´ë¡œ) â©
            </button>
        </div>
    </div>

    <!-- [Breaking News Modal] - ì‚¬ê±´ ë°œìƒ ì‹œ ëœ¨ëŠ” ëŒ€í˜• ëª¨ë‹¬ -->
    <div id="modal-news" class="fixed inset-0 z-50 flex items-end md:items-center justify-center hidden">
        <!-- ë°°ê²½ ì´ë¯¸ì§€ (ë™ì  ë³€ê²½) -->
        <div id="modal-bg" class="absolute inset-0 news-bg bg-gray-900"></div>
        <div class="absolute inset-0 news-overlay"></div>
        
        <!-- ì½˜í…ì¸  -->
        <div class="relative w-full max-w-2xl bg-slate-900/80 backdrop-blur-xl md:rounded-3xl p-6 md:p-10 border-t-4 md:border-4 border-red-500 shadow-2xl animate-slide-up flex flex-col gap-4 mb-0 md:mb-10 mx-4 h-[80vh] md:h-auto overflow-y-auto">
            
            <div class="flex justify-between items-start">
                <span class="bg-red-600 text-white px-3 py-1 text-xs font-bold tracking-widest uppercase rounded animate-pulse">Breaking News</span>
                <span id="modal-year" class="text-slate-400 font-retro text-xl">2ë…„ì°¨</span>
            </div>

            <h2 id="modal-title" class="font-game text-4xl md:text-6xl text-white leading-tight drop-shadow-lg">
                ì „ìŸ ë°œë°œ!
            </h2>

            <p id="modal-desc" class="text-lg md:text-xl text-slate-200 font-light leading-relaxed my-4">
                ì¤‘ë™ ì§€ì—­ì˜ ì§€ì •í•™ì  ë¦¬ìŠ¤í¬ê°€ í­ë°œí–ˆìŠµë‹ˆë‹¤.<br>
                êµ­ì œ ìœ ê°€ê°€ ê¸‰ë“±í•˜ê³  ì£¼ì‹ ì‹œì¥ì´ íŒ¨ë‹‰ì— ë¹ ì¡ŒìŠµë‹ˆë‹¤.<br>
                ì•ˆì „ ìì‚°ì¸ ê¸ˆê°’ì´ ì¹˜ì†Ÿê³  ìˆìŠµë‹ˆë‹¤.
            </p>

            <div class="grid grid-cols-2 gap-3 mb-6 bg-black/30 p-4 rounded-xl border border-white/10">
                <div class="text-center">
                    <span class="text-xs text-slate-400 block mb-1">ìƒìŠ¹ ìì‚° â–²</span>
                    <span id="modal-up" class="text-emerald-400 font-bold text-lg">ê¸ˆ, ë‹¬ëŸ¬</span>
                </div>
                <div class="text-center border-l border-white/10">
                    <span class="text-xs text-slate-400 block mb-1">í•˜ë½ ìì‚° â–¼</span>
                    <span id="modal-down" class="text-red-400 font-bold text-lg">ì£¼ì‹, ì½”ì¸</span>
                </div>
            </div>

            <button onclick="applyTurn()" class="w-full py-4 bg-red-600 hover:bg-red-700 text-white font-game text-2xl rounded-xl shadow-lg transition-all active:scale-95">
                í™•ì¸ (ìì‚° ë³€ë™ ì ìš©)
            </button>
        </div>
    </div>

    <!-- [Ending Screen] -->
    <div id="screen-ending" class="hidden fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-900 p-4 overflow-y-auto">
        <div class="w-full max-w-lg bg-slate-800 rounded-3xl p-6 border-4 border-slate-700 shadow-2xl animate-zoom text-center">
            <div class="text-7xl mb-4 animate-bounce" id="end-emoji">ğŸ†</div>
            <h2 class="font-game text-4xl text-white mb-2">10ë…„ì˜ ì—¬ì • ì¢…ë£Œ</h2>
            <div class="bg-slate-900 rounded-2xl p-6 mb-6 border border-slate-700">
                <div class="text-sm text-slate-500 mb-1">ìµœì¢… ìˆœìì‚°</div>
                <div class="font-retro text-5xl text-emerald-400 mb-2"><span id="final-score">0</span> <span class="text-2xl">ë§Œì›</span></div>
                <div class="text-sm" id="roi-text">ìˆ˜ìµë¥ : +0%</div>
            </div>
            <div class="bg-white/5 rounded-xl p-4 mb-6 text-left">
                <h3 class="font-bold text-yellow-400 mb-2">ğŸ–ï¸ íšë“ ì¹­í˜¸</h3>
                <div id="end-title" class="text-2xl font-game text-white">...</div>
                <p id="end-desc" class="text-sm text-slate-300 mt-2 leading-relaxed">...</p>
            </div>
            <button onclick="location.reload()" class="w-full py-4 bg-indigo-600 rounded-xl font-bold text-white shadow-lg hover:bg-indigo-700 transition-colors">
                ë‹¤ì‹œ ë„ì „í•˜ê¸° ğŸ”„
            </button>
        </div>
    </div>

    <!-- ì•Œë¦¼ -->
    <div id="toast" class="fixed top-24 left-1/2 transform -translate-x-1/2 bg-slate-800 text-white px-6 py-3 rounded-full shadow-2xl border border-slate-600 z-50 hidden transition-all opacity-0 pointer-events-none w-max max-w-[90%] text-center break-keep">
        <span id="toast-msg">ë©”ì‹œì§€</span>
    </div>

    <script>
        // --- ë³´ì•ˆ ë° ì €ì‘ê¶Œ ë³´í˜¸ ë¡œì§ ---
        document.addEventListener('keydown', function(e) {
            // F12, Ctrl+U, Ctrl+C, Ctrl+S, Ctrl+Shift+I ë“± ì°¨ë‹¨
            if (e.key === 'F12' || 
                (e.ctrlKey && (e.key === 'u' || e.key === 'c' || e.key === 's')) ||
                (e.ctrlKey && e.shiftKey && e.key === 'I')) {
                e.preventDefault();
                alert('ğŸš« ê²½ê³ : ì´ ìë£ŒëŠ” ê²½ë¶êµìœ¡ì²­ ê¹€ìŠ¤ë°ë°˜ êµì‚¬ì˜ ì €ì‘ë¬¼ì…ë‹ˆë‹¤.\në¬´ë‹¨ ë³µì œ ë° ì†ŒìŠ¤ ì½”ë“œ ì—´ëŒì´ ê¸ˆì§€ë˜ì–´ ìˆìŠµë‹ˆë‹¤.');
            }
        });

        // --- ê²Œì„ ë°ì´í„° ---
        let currentYear = 1;
        const maxYear = 10;
        let netEquity = 10000;
        let historyData = [10000];
        let labels = ['ì‹œì‘'];
        let allocation = { savings: 25, realestate: 25, stocks: 25, crypto: 15, gold: 10 };
        let myChart = null;
        let isBankrupt = false;
        
        // í„´ ê³„ì‚°ìš© ì„ì‹œ ë³€ìˆ˜
        let tempNextEquity = 0;
        let tempLoanCost = 0;
        let tempProfit = 0;
        let currentEvent = null;

        // [ì´ë²¤íŠ¸ ë°ì´í„°ë² ì´ìŠ¤: ì‹¬í™” & ê·¹ë‹¨ì  ë³€ë™ì„±]
        const events = [
            { 
                name: "í‰ì˜¨í•œ ì„±ì¥", 
                desc: "ê²½ì œê°€ ì™„ë§Œí•˜ê²Œ ì„±ì¥í•©ë‹ˆë‹¤. í° ì´ìŠˆ ì—†ì´ ìì‚°ì´ ë¶ˆì–´ë‚©ë‹ˆë‹¤.", 
                type: "normal", 
                imgKeyword: "nature,calm",
                mult: { savings: 1.03, realestate: 1.05, stocks: 1.08, crypto: 1.05, gold: 1.02 }, 
                loanAdd: 0.02,
                up: "ì£¼ì‹, ë¶€ë™ì‚°", down: "ì—†ìŒ"
            },
            { 
                name: "ğŸ”¥ ê¸ˆë¦¬ ì¸ìƒ ë¹…ìŠ¤í…", 
                desc: "ë¬¼ê°€ë¥¼ ì¡ê¸° ìœ„í•´ ì¤‘ì•™ì€í–‰ì´ ê¸ˆë¦¬ë¥¼ ëŒ€í­ ì¸ìƒí–ˆìŠµë‹ˆë‹¤! ë¹šì„ ë‚¸ íˆ¬ììë“¤ì˜ ë¹„ëª…ì†Œë¦¬ê°€ ë“¤ë¦½ë‹ˆë‹¤.", 
                type: "bad", 
                imgKeyword: "bank,money",
                mult: { savings: 1.06, realestate: 0.90, stocks: 0.75, crypto: 0.50, gold: 0.95 }, 
                loanAdd: 0.05, // ì´ì í­íƒ„
                up: "ì˜ˆê¸ˆ", down: "ë¶€ë™ì‚°, ì½”ì¸"
            },
            { 
                name: "ğŸ’° ìœ ë™ì„± íŒŒí‹°", 
                desc: "ì •ë¶€ê°€ ê²½ê¸° ë¶€ì–‘ì„ ìœ„í•´ ëˆì„ ë¬´ì œí•œìœ¼ë¡œ í’‰ë‹ˆë‹¤! ëª¨ë“  ìì‚° ê°€ê²©ì´ ë¯¸ì¹œ ë“¯ì´ ì˜¤ë¦…ë‹ˆë‹¤.", 
                type: "good", 
                imgKeyword: "party,money",
                mult: { savings: 1.01, realestate: 1.20, stocks: 1.30, crypto: 1.80, gold: 1.10 }, 
                loanAdd: 0.01,
                up: "ì½”ì¸, ì£¼ì‹", down: "í™”íê°€ì¹˜"
            },
            { 
                name: "ğŸ¤– AI íŠ¹ì´ì  ë„ë˜", 
                desc: "ì¸ê³µì§€ëŠ¥ì´ ëª¨ë“  ì‚°ì—…ì„ í˜ì‹ í•©ë‹ˆë‹¤! ê¸°ìˆ ì£¼ì™€ ê´€ë ¨ ì½”ì¸ì´ ì²œì •ë¶€ì§€ë¡œ ì¹˜ì†ŸìŠµë‹ˆë‹¤.", 
                type: "good", 
                imgKeyword: "robot,technology",
                mult: { savings: 1.02, realestate: 1.05, stocks: 1.50, crypto: 2.00, gold: 1.0 }, 
                loanAdd: 0.02,
                up: "ì½”ì¸(2ë°°!), ì£¼ì‹", down: "ì—†ìŒ"
            },
            { 
                name: "ğŸ“‰ ëŒ€ê³µí™©ì˜ ê³µí¬", 
                desc: "ì‹¤ì—…ë¥  ê¸‰ì¦, ì†Œë¹„ ì¹¨ì²´. 'R(Recession)ì˜ ê³µí¬'ê°€ ì‹œì¥ì„ ë®ì³¤ìŠµë‹ˆë‹¤. í˜„ê¸ˆì´ ì™•ì…ë‹ˆë‹¤.", 
                type: "bad", 
                imgKeyword: "rain,sad",
                mult: { savings: 1.03, realestate: 0.85, stocks: 0.70, crypto: 0.40, gold: 1.10 }, 
                loanAdd: 0.02,
                up: "ê¸ˆ, ì˜ˆê¸ˆ", down: "ì£¼ì‹, ì½”ì¸"
            },
            { 
                name: "ğŸ’£ ì œ3ì°¨ ì„¸ê³„ëŒ€ì „ ìœ„ê¸°", 
                desc: "ì£¼ìš” ê°•ëŒ€êµ­ ê°„ì˜ ë¬´ë ¥ ì¶©ëŒ! ì£¼ì‹ ì‹œì¥ì´ ë¶•ê´´í•˜ê³  ì•ˆì „ìì‚°ì¸ ê¸ˆê³¼ ë‹¬ëŸ¬ê°€ í­ë“±í•©ë‹ˆë‹¤.", 
                type: "bad", 
                imgKeyword: "tank,fire",
                mult: { savings: 1.02, realestate: 0.90, stocks: 0.60, crypto: 0.30, gold: 1.50 }, 
                loanAdd: 0.03,
                up: "ê¸ˆ(ë–¡ìƒ)", down: "ì£¼ì‹, ì½”ì¸"
            },
            { 
                name: "ğŸ¦  ë³€ì¢… ë°”ì´ëŸ¬ìŠ¤ íŒ¬ë°ë¯¹", 
                desc: "ìƒˆë¡œìš´ ì „ì—¼ë³‘ìœ¼ë¡œ êµ­ê²½ì´ íì‡„ë˜ê³  ì‹¤ë¬¼ ê²½ì œê°€ ë§ˆë¹„ë©ë‹ˆë‹¤.", 
                type: "bad", 
                imgKeyword: "virus,mask",
                mult: { savings: 1.01, realestate: 0.95, stocks: 0.85, crypto: 1.20, gold: 1.15 }, 
                loanAdd: 0.01,
                up: "ê¸ˆ, ì½”ì¸(ë¹„ëŒ€ë©´)", down: "ë¶€ë™ì‚°"
            },
            { 
                name: "ğŸ—ï¸ ì‹ ë„ì‹œ ê°œë°œ ë¶", 
                desc: "ì •ë¶€ì˜ ëŒ€ê·œëª¨ ë¶€ë™ì‚° ë¶€ì–‘ì±… ë°œí‘œ! ì•„íŒŒíŠ¸ ê°€ê²©ì´ í•˜ë£¨ê°€ ë‹¤ë¥´ê²Œ ì˜¤ë¦…ë‹ˆë‹¤.", 
                type: "good", 
                imgKeyword: "city,building",
                mult: { savings: 1.02, realestate: 1.30, stocks: 1.05, crypto: 1.0, gold: 1.0 }, 
                loanAdd: 0.02,
                up: "ë¶€ë™ì‚°", down: "ì—†ìŒ"
            },
        ];

        function startGame() {
            document.getElementById('screen-intro').classList.add('hidden');
            document.getElementById('screen-game').classList.remove('hidden');
            document.getElementById('screen-game').classList.add('flex');
            document.getElementById('btn-area').classList.remove('hidden');
            initChart();
            updateUI();
        }

        function initChart() {
            const ctx = document.getElementById('assetChart').getContext('2d');
            myChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'ìˆœìì‚°(ë§Œì›)',
                        data: historyData,
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 3,
                        pointBackgroundColor: '#fff',
                        tension: 0.4,
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { display: true, grid: { display: false }, ticks: { color: '#6b7280' } },
                        y: { display: true, grid: { color: '#374151' }, ticks: { color: '#9ca3af' } }
                    },
                    animation: { duration: 1000 }
                }
            });
        }

        function updateAllocation(type, val) {
            allocation[type] = parseInt(val);
            document.getElementById(`val-${type}`).innerText = val;
            
            // ì˜ˆê¸ˆ ìŠ¬ë¼ì´ë” ì²˜ë¦¬ (ëŒ€ì¶œ UI)
            if (type === 'savings') {
                const slider = document.getElementById('slider-savings');
                const panel = document.getElementById('panel-savings');
                const status = document.getElementById('savings-status');
                const textVal = document.getElementById('text-savings');

                if (parseInt(val) < 0) {
                    slider.classList.add('slider-debt');
                    panel.classList.add('bg-debt');
                    status.innerText = "ğŸš¨ ëŒ€ì¶œ ì‹¤í–‰ ì¤‘ (ê³ ìœ„í—˜)";
                    status.className = "text-xs text-red-400 font-bold animate-pulse";
                    textVal.classList.add('text-red-400');
                    textVal.classList.remove('text-white');
                    document.getElementById('leverage-badge').classList.remove('hidden');
                } else {
                    slider.classList.remove('slider-debt');
                    panel.classList.remove('bg-debt');
                    status.innerText = "ì•ˆì „ ìì‚°";
                    status.className = "text-xs text-slate-400 font-normal";
                    textVal.classList.remove('text-red-400');
                    textVal.classList.add('text-white');
                    document.getElementById('leverage-badge').classList.add('hidden');
                }
            }
            
            // í•©ê³„ ê³„ì‚°
            const total = Object.values(allocation).reduce((a, b) => a + b, 0);
            const nextBtn = document.getElementById('btn-next');
            const warning = document.getElementById('alloc-warning');
            const ok = document.getElementById('alloc-ok');
            
            document.getElementById('total-alloc-warn').innerText = total;

            if (total === 100) {
                nextBtn.disabled = false;
                nextBtn.classList.remove('opacity-50', 'grayscale');
                warning.classList.add('hidden');
                ok.classList.remove('hidden');
                
                const grossAsset = Object.values(allocation).reduce((a, b) => b > 0 ? a + b : a, 0);
                document.getElementById('leverage-ratio').innerText = grossAsset;
            } else {
                nextBtn.disabled = true;
                nextBtn.classList.add('opacity-50', 'grayscale');
                warning.classList.remove('hidden');
                ok.classList.add('hidden');
            }
        }

        function updateUI() {
            document.getElementById('display-year').innerText = currentYear;
            const target = Math.round(netEquity);
            document.getElementById('display-total').innerText = target.toLocaleString();
            
            if (netEquity < 0) {
                document.getElementById('display-total').classList.remove('text-emerald-400');
                document.getElementById('display-total').classList.add('text-red-500');
            } else {
                document.getElementById('display-total').classList.add('text-emerald-400');
                document.getElementById('display-total').classList.remove('text-red-500');
            }
        }

        function calculateTurn() {
            if (currentYear > maxYear || isBankrupt) return;

            let event = events[0];
            if (currentYear > 1) {
                event = events[Math.floor(Math.random() * events.length)];
            }
            currentEvent = event;

            let portions = {};
            let prevNetEquity = netEquity;
            
            for (let key in allocation) {
                portions[key] = netEquity * (allocation[key] / 100);
            }

            const noise = () => (Math.random() * 0.1) - 0.05 + 1; 

            tempNextEquity = 0;
            tempLoanCost = 0;

            for (let key in portions) {
                let amount = portions[key];
                
                if (key === 'savings' && amount < 0) {
                    let loanRate = (event.mult.savings - 1) + event.loanAdd; 
                    let debtMultiplier = 1 + loanRate; 
                    amount = amount * debtMultiplier; 
                    tempLoanCost += Math.abs(amount - portions[key]);
                } else {
                    let multiplier = event.mult[key];
                    if (key !== 'savings') multiplier = multiplier * noise();
                    if (key === 'crypto') multiplier = multiplier * ((Math.random() * 0.4) - 0.2 + 1);

                    amount = amount * multiplier;
                }
                tempNextEquity += amount;
            }
            tempProfit = tempNextEquity - prevNetEquity;

            showModal(event);
        }

        function showModal(event) {
            const modal = document.getElementById('modal-news');
            const bg = document.getElementById('modal-bg');
            
            bg.style.backgroundImage = `url('https://loremflickr.com/800/600/${event.imgKeyword}?random=${Date.now()}')`;
            
            document.getElementById('modal-year').innerText = (currentYear + 1) + "ë…„ì°¨ ì†ë³´";
            document.getElementById('modal-title').innerText = event.name;
            document.getElementById('modal-desc').innerText = event.desc;
            document.getElementById('modal-up').innerText = event.up;
            document.getElementById('modal-down').innerText = event.down;

            modal.classList.remove('hidden');
        }

        function applyTurn() {
            document.getElementById('modal-news').classList.add('hidden');

            netEquity = tempNextEquity;
            currentYear++;
            
            historyData.push(Math.round(netEquity));
            labels.push(currentYear <= 10 ? currentYear + 'ë…„' : 'ì¢…ë£Œ');
            myChart.update();

            if (tempProfit > 0) showToast(`ğŸ“ˆ ìì‚° ì¦ê°€! (+${Math.round(tempProfit).toLocaleString()}ë§Œì›)`, 'green');
            else {
                let msg = `ğŸ“‰ ìì‚° ê°ì†Œ (${Math.round(tempProfit).toLocaleString()}ë§Œì›)`;
                if (tempLoanCost > 0) msg += `<br>ğŸ’¸ ëŒ€ì¶œ ì´ì: -${Math.round(tempLoanCost).toLocaleString()}ë§Œì›`;
                showToast(msg, 'red');
            }

            if (netEquity <= 0) {
                isBankrupt = true;
                document.getElementById('bankruptcy-overlay').classList.remove('hidden');
                document.getElementById('bankruptcy-overlay').classList.add('flex');
                setTimeout(showEnding, 2500);
                return;
            }

            updateUI();

            if (currentYear > maxYear) {
                setTimeout(showEnding, 1500);
            } else {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        function showToast(msg, color) {
            const toast = document.getElementById('toast');
            const txt = document.getElementById('toast-msg');
            txt.innerHTML = msg;
            
            if(color === 'red') toast.className = "fixed top-24 left-1/2 transform -translate-x-1/2 bg-red-900/90 text-white px-6 py-3 rounded-2xl shadow-2xl border border-red-500 z-50 animate-bounce transition-all text-center";
            else toast.className = "fixed top-24 left-1/2 transform -translate-x-1/2 bg-emerald-900/90 text-white px-6 py-3 rounded-2xl shadow-2xl border border-emerald-500 z-50 animate-bounce transition-all text-center";
            
            toast.classList.remove('hidden');
            toast.style.opacity = 1;

            setTimeout(() => {
                toast.style.opacity = 0;
                setTimeout(() => toast.classList.add('hidden'), 300);
            }, 2500);
        }

        function showEnding() {
            missionComplete=true;
            if(document.fullscreenElement)document.exitFullscreen().catch(function(){});
            document.getElementById('screen-ending').classList.remove('hidden');
            const finalVal = Math.round(netEquity);
            document.getElementById('final-score').innerText = finalVal.toLocaleString();
            
            const roi = ((finalVal - 10000) / 10000) * 100;
            const roiEl = document.getElementById('roi-text');
            
            let roiText = `ì´ ìˆ˜ìµë¥ : ${roi > 0 ? '+' : ''}${roi.toFixed(1)}%`;
            if (isBankrupt) roiText = "íŒŒì‚° (ìì‚° ì†Œë©¸)";
            
            roiEl.innerText = roiText;
            if (roi > 0) roiEl.classList.add('text-emerald-400');
            else roiEl.classList.add('text-red-400');

            const titleEl = document.getElementById('end-title');
            const descEl = document.getElementById('end-desc');
            const emojiEl = document.getElementById('end-emoji');

            if (isBankrupt || finalVal <= 0) {
                emojiEl.innerText = "ğŸ’¸";
                titleEl.innerText = "ê°œì¸íšŒìƒ ì‹ ì²­ì";
                titleEl.className = "text-3xl font-game text-red-600";
                descEl.innerText = "ë¬´ë¦¬í•œ ë¹šíˆ¬ì˜ ìµœí›„ì…ë‹ˆë‹¤. ìš•ì‹¬ì´ ê³¼í•˜ë©´ íŒŒë©¸ì„ ë¶€ë¥¸ë‹¤ëŠ” êµí›ˆì„ ì–»ìœ¼ì…¨ê¸¸ ë°”ëë‹ˆë‹¤.";
            } else if (finalVal >= 50000) { 
                emojiEl.innerText = "ğŸ‘‘";
                titleEl.innerText = "ì›”ìŠ¤íŠ¸ë¦¬íŠ¸ì˜ ëŠ‘ëŒ€";
                titleEl.className = "text-3xl font-game text-yellow-400";
                descEl.innerText = "5ë°° ì´ìƒì˜ ìˆ˜ìµ! ë‹¹ì‹ ì€ ì „ì„¤ì…ë‹ˆë‹¤. ë¹šì„ í™œìš©í•´ ë¶€ë¥¼ ì°½ì¡°í•˜ëŠ” 'ì‹ 'ì˜ ê²½ì§€ì— ë„ë‹¬í–ˆìŠµë‹ˆë‹¤.";
            } else if (finalVal >= 30000) { 
                emojiEl.innerText = "ğŸ˜";
                titleEl.innerText = "íŒŒì´ì–´ì¡± ë‹¬ì„±";
                titleEl.className = "text-2xl font-game text-emerald-400";
                descEl.innerText = "ì¶•í•˜í•©ë‹ˆë‹¤! 3ë°°ì˜ ìˆ˜ìµì„ ì˜¬ë ¸ìŠµë‹ˆë‹¤. ì´ì œ ì€í‡´í•˜ê³  ì„¸ê³„ ì—¬í–‰ì´ë‚˜ ë‹¤ë‹ˆì‹œì£ .";
            } else if (finalVal >= 10000) { 
                emojiEl.innerText = "ğŸ›¡ï¸";
                titleEl.innerText = "ìƒì¡´ì";
                titleEl.className = "text-2xl font-game text-blue-400";
                descEl.innerText = "ê·¸ í—˜ë‚œí•œ ìœ„ê¸° ì†ì—ì„œ ì›ê¸ˆì„ ì§€ì¼°ìŠµë‹ˆë‹¤. ëŒ€ë‹¨í•œ ë°©ì–´ë ¥ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë¶€ìëŠ” ëª» ë˜ì—ˆêµ°ìš”.";
            } else { 
                emojiEl.innerText = "ğŸ˜­";
                titleEl.innerText = "ê°œë¯¸ íˆ¬ìì";
                titleEl.className = "text-2xl font-game text-orange-400";
                descEl.innerText = "ì›ê¸ˆì„ ìƒì—ˆìŠµë‹ˆë‹¤. ìˆ˜ì—…ë£Œ ëƒˆë‹¤ê³  ìƒê°í•˜ì„¸ìš”. ë‹¤ìŒì—” ë‰´ìŠ¤ì— ë” ê·€ë¥¼ ê¸°ìš¸ì´ì„¸ìš”.";
            }
        }
    </script>
<!-- ì „ì²´í™”ë©´ ì´íƒˆ ê²½ê³  -->
<div class="fs-warning-overlay" id="fs-warning" style="display:none">
  <div class="warn-icon">âš ï¸</div>
  <div class="warn-title">í•™ìŠµ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤!</div>
  <div class="warn-msg">ì „ì²´í™”ë©´ì„ ìœ ì§€í•´ì•¼ í•™ìŠµì„ ê³„ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ë‹¤ì‹œ ì „ì²´í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ì„¸ìš”.</div>
  <button class="warn-btn" onclick="reEnterFullscreen()">ğŸ”’ ì „ì²´í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
</div>
<a href="https://ssam-ssong.blogspot.com" target="_blank" class="blog-badge">âœï¸ í’€ì–´ì“°ëŠ” ì‚¬íšŒí•™</a>
<script>
var missionComplete = false;
var isReEntering = false;
function reEnterFullscreen(){
  isReEntering = true;
  document.getElementById('fs-warning').style.display = 'none';
  document.documentElement.requestFullscreen().catch(function(){isReEntering=false;});
}
document.addEventListener('fullscreenchange', function(){
  if(!document.fullscreenElement && !missionComplete && !isReEntering){
    document.getElementById('fs-warning').style.display = 'flex';
  }
  if(document.fullscreenElement){
    isReEntering = false;
    document.getElementById('fs-warning').style.display = 'none';
  }
});
</script>
</body>
</html>