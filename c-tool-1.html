<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í”„ë¦¬ë¯¸ì—„ ì‹œê°„í‘œ ë§ˆìŠ¤í„° V6 (ìµœì¢…íŒ) | í’€ì–´ì“°ëŠ” ì‚¬íšŒí•™</title>
    <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@300;400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --bg-color: #f5f6fa; --card-bg: #ffffff; --text-color: #2d3436;
            --primary: #74b9ff; --secondary: #a29bfe; --accent: #ff7675;
        }

        /* [Themes] */
        body.theme-blue { --bg-color: #ebf5fb; --primary: #3498db; --secondary: #85c1e9; --accent: #f1948a; }
        body.theme-mint { --primary: #55efc4; --secondary: #81ecec; --accent: #fab1a0; }
        body.theme-dark { --bg-color: #2d3436; --card-bg: #353b48; --text-color: #f5f6fa; --primary: #00d2d3; --secondary: #54a0ff; }
        body.theme-pink { --primary: #ffaad4; --secondary: #fdcb6e; --accent: #e17055; }
        body.theme-modern { --primary: #636e72; --secondary: #b2bec3; --accent: #2d3436; }
        body.theme-yellow { --primary: #ffeaa7; --secondary: #fab1a0; --accent: #ff7675; }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 20px;
            transition: all 0.3s ease;
        }

        h1, h2, h3, .jua { font-family: 'Jua', sans-serif; }
        .container { max-width: 1200px; margin: 0 auto; }

        /* ì„¤ì •ì°½ (ì¸ì‡„ ì‹œ ìˆ¨ê¹€) */
        .config-panel {
            background: var(--card-bg);
            padding: 25px; border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            margin-bottom: 25px;
            border-top: 8px solid var(--primary);
            color: #2d3436;
        }

        /* ì¹œì ˆí•œ ê°€ì´ë“œ ë°•ìŠ¤ */
        .friendly-guide {
            background: #f0f7ff;
            border-left: 5px solid var(--primary);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 12px 12px 0;
            font-size: 0.9rem;
            line-height: 1.6;
        }
        .friendly-guide b { color: var(--primary); }

        .grid-3 { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 15px; }
        .input-box label { display: block; font-size: 0.85rem; font-weight: bold; margin-bottom: 5px; color: #636e72; }
        .input-box input, .input-box select, .input-box textarea {
            width: 100%; padding: 12px; border: 2px solid #eee; border-radius: 12px; font-family: inherit; outline: none;
        }
        #smartInput { height: 160px; background: #fff; border: 2px solid var(--primary); font-size: 0.9rem; }

        /* ì‹œê°„í‘œ ë³¸ì²´ */
        .timetable-paper {
            position: relative; background: white; border-radius: 30px;
            padding: 40px; box-shadow: 0 20px 60px rgba(0,0,0,0.1);
            overflow: hidden; min-height: 1000px;
            -webkit-print-color-adjust: exact !important; print-color-adjust: exact !important;
        }

        #bgLayer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-size: cover; background-position: center; z-index: 0; pointer-events: none;
        }

        .content-layer { position: relative; z-index: 1; }
        .header { text-align: center; margin-bottom: 30px; }
        .header h1 { font-size: 3.5rem; color: var(--text-color); margin: 0 15px; display: inline-block; vertical-align: middle; }
        .header .emoji { font-size: 3rem; vertical-align: middle; }
        .class-meta { font-size: 1.3rem; opacity: 0.8; margin-bottom: 5px; }

        table { width: 100%; border-collapse: separate; border-spacing: 6px; table-layout: fixed; }
        th {
            background: var(--primary) !important; color: white !important; padding: 15px;
            border-radius: 15px; font-family: 'Jua'; font-size: 1.5rem;
            -webkit-print-color-adjust: exact !important;
        }

        td {
            background: rgba(255, 255, 255, 0.85) !important; height: 95px; border-radius: 15px;
            padding: 8px; text-align: center; vertical-align: middle;
            border: 1px solid rgba(0,0,0,0.05); backdrop-filter: blur(5px);
            -webkit-print-color-adjust: exact !important;
        }

        .time-label { background: rgba(0,0,0,0.03) !important; width: 130px; font-family: 'Jua'; border: none !important; }
        .time-label span { color: var(--primary); font-size: 1.2rem; }
        .time-label small { display: block; font-size: 0.75rem; color: #999; }

        .lunch-row td {
            height: 50px !important; background: rgba(255, 118, 117, 0.15) !important;
            font-family: 'Jua'; color: var(--accent); font-size: 1.2rem; letter-spacing: 2px;
        }

        .subj { display: block; font-family: 'Jua'; font-size: 1.6rem; color: #2d3436; margin-bottom: 3px; line-height: 1.1; }
        .prof { display: inline-block; background: var(--secondary); color: white; padding: 2px 10px; border-radius: 6px; font-size: 0.85rem; font-weight: bold; }

        .btn-group { display: flex; gap: 10px; margin-top: 20px; }
        button {
            flex: 1; padding: 15px; border-radius: 15px; border: none; cursor: pointer;
            font-family: 'Jua'; font-size: 1.2rem; transition: 0.3s;
        }
        .btn-apply { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(0,0,0,0.1); }
        .btn-apply:hover { transform: translateY(-2px); filter: brightness(1.1); }
        .btn-print { background: var(--text-color); color: white; }

        /* [Branding Footer] */
        footer {
            text-align: center; margin-top: 50px; padding: 30px; font-size: 0.85rem; color: #888;
        }
        footer a { color: #555; text-decoration: none; font-weight: bold; border-bottom: 2px solid #ddd; }
        footer a:hover { color: var(--primary); border-color: var(--primary); }

        @media print {
            .config-panel, footer { display: none !important; }
            body { padding: 0; background: white; }
            .timetable-paper { box-shadow: none; border-radius: 0; padding: 10px; width: 100%; }
        }
    </style>
</head>
<body class="theme-blue">

<div class="container">
    <div class="config-panel">
        <h2 class="jua" style="color: var(--primary); margin-bottom:15px; font-size: 1.8rem;">
            <i class="fas fa-edit"></i> í’€ì‚¬ ì‹œê°„í‘œ ë©”ì´ì»¤
        </h2>
        
        <div class="friendly-guide">
            <i class="fas fa-info-circle"></i> <b>ì¹œì ˆí•œ ì‚¬ìš© ê°€ì´ë“œ:</b><br>
            1. <b>[ë°ì´í„° ì…ë ¥]</b> ì¹¸ì— ê³¼ëª©ì„ ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„í•´ ì ìœ¼ì„¸ìš”. ê³¼ëª©ì„ 7ê°œ ì ìœ¼ë©´ 7êµì‹œ, 9ê°œ ì ìœ¼ë©´ 9êµì‹œê°€ <b>ìë™ìœ¼ë¡œ ìƒì„±</b>ë©ë‹ˆë‹¤.<br>
            2. <b>[ê³¼ëª©/êµì‚¬]</b> í˜•ì‹ì„ ì‚¬ìš©í•˜ë©´ ë‹´ë‹¹ ì„ ìƒë‹˜ ì´ë¦„ì´ ì˜ˆìœ ë°•ìŠ¤ ì•ˆì— ì™ ë“¤ì–´ê°‘ë‹ˆë‹¤. (ì˜ˆ: êµ­ì–´/ê¹€ì„ ìƒ)<br>
            3. ì ì‹¬ì‹œê°„ì€ ì„¤ì •í•œ êµì‹œ ë’¤ì— ìë™ìœ¼ë¡œ í•œ ì¤„ì´ ì¶”ê°€ë©ë‹ˆë‹¤. (ì˜ˆ: 4êµì‹œ í›„ ì ì‹¬)
        </div>
        
        <div class="grid-3">
            <div class="input-box">
                <label><i class="fas fa-school"></i> ìš°ë¦¬ ë°˜ ì •ë³´</label>
                <div style="display: flex; gap: 5px;">
                    <input type="text" id="classInfo" value="5í•™ë…„ 1ë°˜" placeholder="í•™ë…„/ë°˜">
                    <input type="text" id="teacherName" value="ë°•ì‚¬ë‘" placeholder="ì„ ìƒë‹˜ ì„±í•¨">
                </div>
            </div>
            <div class="input-box">
                <label><i class="fas fa-palette"></i> ë””ìì¸ í…Œë§ˆ</label>
                <select id="themeSelect" onchange="changeTheme(this.value)">
                    <option value="theme-blue" selected>ğŸ’™ í¸ì•ˆí•œ ì˜¤ì…˜ ë¸”ë£¨</option>
                    <option value="theme-mint">ğŸŒ¿ íŒŒìŠ¤í…” ë¯¼íŠ¸</option>
                    <option value="theme-dark">ğŸ“ í´ë˜ì‹ ì¹ íŒ</option>
                    <option value="theme-pink">ğŸŒ¸ ë²šê½ƒ í•‘í¬</option>
                    <option value="theme-modern">ğŸ©¶ ëª¨ë˜ ë¯¸ë‹ˆë©€</option>
                    <option value="theme-yellow">â˜€ï¸ ì¬ìƒ¤ì¸ ì˜ë¡œìš°</option>
                </select>
            </div>
            <div class="input-box">
                <label><i class="fas fa-icons"></i> ì¢Œìš° ì´ëª¨ì§€ (ê¸°ë¶„ë”°ë¼!)</label>
                <div style="display: flex; gap: 5px;">
                    <input type="text" id="emojiL" value="ğŸŒŠ">
                    <input type="text" id="emojiR" value="ğŸ¬">
                </div>
            </div>
        </div>

        <div class="grid-3">
            <div class="input-box">
                <label><i class="fas fa-clock"></i> ì‹œê°„ ìë™ ê³„ì‚° ì„¤ì •</label>
                <div style="display: flex; gap: 4px;">
                    <input type="time" id="startTime" value="09:00" title="ìˆ˜ì—… ì‹œì‘ ì‹œê°„">
                    <input type="number" id="lesson" value="40" title="ìˆ˜ì—… ì‹œê°„(ë¶„)">
                    <input type="number" id="break" value="10" title="ì‰¬ëŠ” ì‹œê°„(ë¶„)">
                    <input type="number" id="lunch" value="50" title="ì ì‹¬ ì‹œê°„(ë¶„)">
                </div>
            </div>
            <div class="input-box">
                <label><i class="fas fa-utensils"></i> ì ì‹¬ì‹œê°„ ìœ„ì¹˜ (êµì‹œ í›„)</label>
                <input type="number" id="lunchAfter" value="4" min="1" max="10">
            </div>
            <div class="input-box">
                <label><i class="fas fa-image"></i> ë°°ê²½ ì´ë¯¸ì§€ & íˆ¬ëª…ë„</label>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <input type="file" id="bgFile" accept="image/*" style="font-size: 0.7rem;">
                    <input type="range" id="bgOpacity" min="0" max="1" step="0.1" value="0.2" style="width: 70px;">
                </div>
            </div>
        </div>

        <div class="input-box">
            <label><i class="fas fa-keyboard"></i> ì‹œê°„í‘œ ë°ì´í„° (ìš”ì¼ë‹¹ í•œ ì¤„, ì‰¼í‘œë¡œ ê³¼ëª© êµ¬ë¶„)</label>
            <textarea id="smartInput" placeholder="(ì›”) êµ­ì–´/ë°•ìƒ˜, ìˆ˜í•™, ì‚¬íšŒ, ê³¼í•™/ì´ìƒ˜, ì²´ìœ¡, ìŒì•…, ë¯¸ìˆ , ì°½ì²´"></textarea>
            <p style="font-size:0.75rem; color:#888; margin-top:5px;">* ì˜ˆì‹œ: (ì›”) êµ­ì–´, ìˆ˜í•™, ì‚¬íšŒ ... (í™”) ì²´ìœ¡, ìŒì•… ...</p>
        </div>

        <div class="btn-group">
            <button class="btn-apply" onclick="update()"><i class="fas fa-magic"></i> ë””ìì¸ ë° ë°ì´í„° ì ìš©</button>
            <button class="btn-print" onclick="window.print()"><i class="fas fa-print"></i> í’€ì»¬ëŸ¬ ì¸ì‡„ / PDF ì €ì¥</button>
        </div>
    </div>

    <div class="timetable-paper">
        <div id="bgLayer"></div>
        <div class="content-layer">
            <div class="header">
                <div class="class-meta" id="outMeta">5í•™ë…„ 1ë°˜ | ë‹´ì„ ì„ ìƒë‹˜: ë°•ì‚¬ë‘</div>
                <div>
                    <span class="emoji" id="outEmojiL">ğŸŒŠ</span>
                    <h1 class="jua">ì£¼ê°„ ì‹œê°„í‘œ</h1>
                    <span class="emoji" id="outEmojiR">ğŸ¬</span>
                </div>
            </div>

            <table>
                <thead>
                    <tr>
                        <th style="width: 140px;">ì‹œê°„/êµì‹œ</th>
                        <th>ì›”</th><th>í™”</th><th>ìˆ˜</th><th>ëª©</th><th>ê¸ˆ</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
    </div>
</div>

<footer>
    Created by <a href="https://www.google.com/search?q=kstephullab.com" target="_blank">í’€ì–´ì“°ëŠ” ì‚¬íšŒí•™</a>
</footer>

<script>
    let db = JSON.parse(localStorage.getItem('v6_final_data')) || {
        class: "5í•™ë…„ 1ë°˜", teacher: "ë°•ì‚¬ë‘", emojiL: "ğŸŒŠ", emojiR: "ğŸ¬", theme: "theme-blue",
        start: "09:00", lesson: 40, break: 10, lunch: 50, lunchAfter: 4, opacity: 0.2, bg: "",
        raw: "(ì›”) êµ­ì–´/ë°•ìƒ˜, ìˆ˜í•™, ì‚¬íšŒ, ê³¼í•™/ì´ìƒ˜, ì²´ìœ¡, ìŒì•…, ë¯¸ìˆ , ì°½ì²´\n(í™”) ìˆ˜í•™, êµ­ì–´, ì˜ì–´, ë„ë•, ì‹¤ê³¼, ì‹¤ê³¼, ì°½ì²´, ì°½ì²´\n(ìˆ˜) ì˜ì–´, ìˆ˜í•™, êµ­ì–´, ì²´ìœ¡, ì‚¬íšŒ, ì°½ì²´\n(ëª©) êµ­ì–´, ìˆ˜í•™, ì‚¬íšŒ, ê³¼í•™, ì˜ì–´, ì°½ì²´, ì°½ì²´, ë™ì•„ë¦¬\n(ê¸ˆ) ìˆ˜í•™, êµ­ì–´, ì²´ìœ¡, ìŒì•…, ë¯¸ìˆ , ë¯¸ìˆ "
    };

    window.onload = () => {
        initInputs();
        update();

        document.getElementById('bgFile').onchange = (e) => {
            const reader = new FileReader();
            reader.onload = (ev) => { db.bg = ev.target.result; update(); };
            reader.readAsDataURL(e.target.files[0]);
        };

        document.getElementById('bgOpacity').oninput = (e) => {
            db.opacity = e.target.value;
            document.getElementById('bgLayer').style.opacity = db.opacity;
            document.getElementById('opacityVal')?.innerText && (document.getElementById('opacityVal').innerText = db.opacity);
        };
    };

    function initInputs() {
        document.getElementById('classInfo').value = db.class;
        document.getElementById('teacherName').value = db.teacher;
        document.getElementById('emojiL').value = db.emojiL;
        document.getElementById('emojiR').value = db.emojiR;
        document.getElementById('themeSelect').value = db.theme;
        document.getElementById('startTime').value = db.start;
        document.getElementById('lesson').value = db.lesson;
        document.getElementById('break').value = db.break;
        document.getElementById('lunch').value = db.lunch;
        document.getElementById('lunchAfter').value = db.lunchAfter;
        document.getElementById('smartInput').value = db.raw;
        document.getElementById('bgOpacity').value = db.opacity;
        changeTheme(db.theme);
    }

    function changeTheme(val) {
        document.body.className = val;
        db.theme = val;
    }

    function update() {
        db.class = document.getElementById('classInfo').value;
        db.teacher = document.getElementById('teacherName').value;
        db.emojiL = document.getElementById('emojiL').value;
        db.emojiR = document.getElementById('emojiR').value;
        db.start = document.getElementById('startTime').value;
        db.lesson = parseInt(document.getElementById('lesson').value);
        db.break = parseInt(document.getElementById('break').value);
        db.lunch = parseInt(document.getElementById('lunch').value);
        db.lunchAfter = parseInt(document.getElementById('lunchAfter').value);
        db.raw = document.getElementById('smartInput').value;

        document.getElementById('outMeta').textContent = `${db.class} | ë‹´ì„ ì„ ìƒë‹˜: ${db.teacher}`;
        document.getElementById('outEmojiL').textContent = db.emojiL;
        document.getElementById('outEmojiR').textContent = db.emojiR;
        if(db.bg) document.getElementById('bgLayer').style.backgroundImage = `url(${db.bg})`;
        document.getElementById('bgLayer').style.opacity = db.opacity;

        render();
        localStorage.setItem('v6_final_data', JSON.stringify(db));
    }

    function render() {
        const lines = db.raw.split('\n');
        const week = [[], [], [], [], []];
        lines.forEach(line => {
            let idx = -1;
            if(line.includes('(ì›”)')) idx = 0; 
else if(line.includes('(í™”)')) idx = 1;
else if(line.includes('(ìˆ˜)')) idx = 2; 
else if(line.includes('(ëª©)')) idx = 3; 
else if(line.includes('(ê¸ˆ)')) idx = 4;
            if(idx !== -1) {
                const parts = line.split(')');
                if(parts.length > 1) {
                    week[idx] = parts[1].split(',').map(s => s.trim());
                }
            }
        });

        const maxRows = Math.min(10, Math.max(...week.map(d => d.length)));
        const body = document.getElementById('tableBody');
        body.innerHTML = '';
        let curr = new Date(`2026-01-01T${db.start}:00`);

        for(let i=0; i < maxRows; i++) {
            // ì ì‹¬ì‹œê°„ í–‰ ì‚½ì… ë¡œì§
            if(i === db.lunchAfter) {
                const ltr = document.createElement('tr');
                ltr.className = 'lunch-row';
                const lStart = formatTime(curr);
                curr = new Date(curr.getTime() + db.lunch * 60000);
                ltr.innerHTML = `<td class="time-label"><span>ì‹ì‚¬</span><small>${lStart}~${formatTime(curr)}</small></td><td colspan="5">ğŸ´ ë§›ìˆëŠ” ì ì‹¬ì‹œê°„</td>`;
                body.appendChild(ltr);
            }

            const tr = document.createElement('tr');
            const sTime = formatTime(curr);
            curr = new Date(curr.getTime() + db.lesson * 60000);
            const eTime = formatTime(curr);

            const timeTd = document.createElement('td');
            timeTd.className = 'time-label';
            timeTd.innerHTML = `<span>${i+1}êµì‹œ</span><small>${sTime}-${eTime}</small>`;
            tr.appendChild(timeTd);

            for(let d=0; d<5; d++) {
                const td = document.createElement('td');
                const data = week[d][i] || '';
                if(data) {
                    const [s, t] = data.split('/');
                    td.innerHTML = `<span class="subj">${s}</span>${t ? `<span class="prof">${t}</span>` : ''}`;
                }
                tr.appendChild(td);
            }
            body.appendChild(tr);
            curr = new Date(curr.getTime() + db.break * 60000);
        }
        confetti({ particleCount: 80, spread: 60, origin: { y: 0.8 } });
    }

    function formatTime(d) { return d.toTimeString().substring(0, 5); }
</script>
</body>
</html>