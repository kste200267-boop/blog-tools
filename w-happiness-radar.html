<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>ğŸ˜Š í–‰ë³µ ë ˆì´ë” â€” ë‚˜ì˜ í–‰ë³µ ì„±í–¥ ì§„ë‹¨</title>
<link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@300;400;700;900&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:'Noto Sans KR',sans-serif;background:#fefce8;color:#1e293b;min-height:100vh;overflow-x:hidden}
.jua{font-family:'Jua',sans-serif}

.screen{display:none;animation:fadeUp .5s ease-out forwards;min-height:100vh}
.screen.active{display:flex;flex-direction:column}
@keyframes fadeUp{from{opacity:0;transform:translateY(25px)}to{opacity:1;transform:translateY(0)}}
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
@keyframes pop{0%{transform:scale(0.8);opacity:0}100%{transform:scale(1);opacity:1}}
@keyframes shimmer{0%{background-position:-200% center}100%{background-position:200% center}}
@keyframes heartbeat{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}

/* ì‹œì‘ í™”ë©´ */
.start-bg{background:linear-gradient(135deg,#fef3c7 0%,#fde68a 30%,#fbbf24 60%,#f59e0b 100%);position:relative}

/* ì§„í–‰ ë°” */
.progress-outer{height:8px;background:#fef3c7;border-radius:99px;overflow:hidden}
.progress-inner{height:100%;background:linear-gradient(90deg,#f59e0b,#ef4444,#8b5cf6,#3b82f6,#10b981);border-radius:99px;transition:width .5s}

/* ì¹´ë“œí˜• ì„ íƒì§€ */
.opt-card{
  background:white;border:2.5px solid #e5e7eb;border-radius:1.2rem;padding:1.2rem;
  cursor:pointer;transition:all .3s;text-align:center;position:relative;overflow:hidden;
}
.opt-card:hover{transform:translateY(-4px);box-shadow:0 12px 30px rgba(0,0,0,0.1);border-color:#f59e0b}
.opt-card:active{transform:scale(0.97)}
.opt-card.selected{border-color:#f59e0b;background:#fffbeb;box-shadow:0 0 0 3px rgba(245,158,11,0.2)}
.opt-card .opt-emoji{font-size:2.5rem;margin-bottom:0.5rem;display:block}
.opt-card .opt-text{font-size:0.9rem;font-weight:600;color:#1e293b;line-height:1.4}
.opt-card .opt-sub{font-size:0.75rem;color:#9ca3af;margin-top:4px}

/* VS ì¹´ë“œ (ì–‘ìíƒì¼) */
.vs-card{
  flex:1;background:white;border:3px solid #e5e7eb;border-radius:1.5rem;padding:1.5rem;
  cursor:pointer;transition:all .3s;text-align:center;min-height:140px;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
}
.vs-card:hover{transform:scale(1.03);box-shadow:0 12px 30px rgba(0,0,0,0.08)}
.vs-card.selected{border-color:#f59e0b;background:#fffbeb}

/* ìŠ¬ë¼ì´ë” */
.custom-slider{-webkit-appearance:none;width:100%;height:12px;border-radius:6px;background:linear-gradient(90deg,#fee2e2,#fef3c7,#dcfce7);outline:none}
.custom-slider::-webkit-slider-thumb{-webkit-appearance:none;width:32px;height:32px;border-radius:50%;background:#f59e0b;cursor:pointer;border:3px solid white;box-shadow:0 2px 8px rgba(0,0,0,0.2)}

/* ìƒí™©ê·¹ ì¹´ë“œ */
.scenario-card{background:white;border-radius:1.5rem;padding:1.5rem;border:1px solid #e5e7eb;box-shadow:0 4px 12px rgba(0,0,0,0.05)}
.scenario-header{display:flex;align-items:center;gap:12px;margin-bottom:1rem;padding-bottom:0.8rem;border-bottom:1px solid #f3f4f6}

/* ê²°ê³¼ */
.result-card{background:white;border-radius:1.5rem;max-width:560px;margin:0 auto;overflow:hidden;box-shadow:0 8px 30px rgba(0,0,0,0.08)}
.type-badge{display:inline-block;padding:6px 18px;border-radius:99px;font-size:0.85rem;font-weight:700}

/* êµê³¼ì„œ ë°•ìŠ¤ */
.edu-box{background:#eff6ff;border:1px solid #bfdbfe;border-radius:1rem;padding:1rem 1.2rem}

@media(max-width:640px){.opt-card .opt-emoji{font-size:2rem}.vs-card{min-height:120px;padding:1rem}}
@media print{body{background:white}.screen{display:none!important}}

/* ì „ì²´í™”ë©´ ì´íƒˆ ê²½ê³  ì˜¤ë²„ë ˆì´ */
.fs-warning-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.92);z-index:9999;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:1.5rem;animation:fadeIn .3s}
.fs-warning-overlay .warn-icon{font-size:4rem;animation:shake .5s}
.fs-warning-overlay .warn-title{font-size:1.5rem;font-weight:900;color:#fbbf24}
.fs-warning-overlay .warn-msg{font-size:1rem;color:#94a3b8;text-align:center;max-width:320px;line-height:1.6}
.fs-warning-overlay .warn-btn{padding:14px 40px;background:linear-gradient(135deg,#3b82f6,#8b5cf6);border:none;border-radius:12px;color:#fff;font-size:1.1rem;font-weight:700;cursor:pointer;transition:transform .2s}
.fs-warning-overlay .warn-btn:hover{transform:scale(1.05)}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
/* ë¸”ë¡œê·¸ ë§í¬ ë°°ì§€ */
.blog-badge{position:fixed;bottom:12px;right:12px;z-index:100;background:rgba(15,23,42,0.85);border:1px solid #334155;border-radius:10px;padding:6px 14px;font-size:0.75rem;color:#94a3b8;text-decoration:none;backdrop-filter:blur(8px);transition:all .3s;display:flex;align-items:center;gap:6px}
.blog-badge:hover{background:rgba(59,130,246,0.2);border-color:#3b82f6;color:#60a5fa}
</style>
</head>
<body>

<!-- ===== ìŠ¤íƒ€íŠ¸ ===== -->
<div class="screen active start-bg" id="s-start">
  <div class="flex-1 flex flex-col items-center justify-center p-6 text-center">
    <div style="font-size:6rem;animation:float 3s ease-in-out infinite">ğŸ˜Š</div>
    <h1 class="jua text-4xl md:text-5xl text-amber-900 mb-3 mt-4">í–‰ë³µ ë ˆì´ë”</h1>
    <p class="text-amber-800 text-lg mb-1">ë‚˜ì˜ í–‰ë³µì€ ì–´ë–¤ ëª¨ì–‘ì¼ê¹Œ?</p>
    <p class="text-amber-700/60 text-sm mb-10 max-w-sm leading-relaxed">12ê°œì˜ ì§ˆë¬¸ìœ¼ë¡œ ì•Œì•„ë³´ëŠ” ë‚˜ë§Œì˜ í–‰ë³µ ì„±í–¥ ì§„ë‹¨. ì •ë‹µì€ ì—†ì–´ìš”, ì†”ì§í•˜ê²Œ ê³¨ë¼ë³´ì„¸ìš”!</p>
    <button onclick="startQuiz()" class="py-4 px-12 bg-amber-900 hover:bg-amber-800 text-white rounded-2xl font-bold text-lg transition-all hover:scale-105 shadow-lg" style="animation:heartbeat 2s infinite">
      ì§„ë‹¨ ì‹œì‘í•˜ê¸° ğŸ’›
    </button>
    <p class="text-amber-600/40 text-xs mt-4">â± ì•½ 10~12ë¶„ ì†Œìš” Â· ì´ 12ë¬¸í•­</p>
  </div>
  <div class="text-center pb-4 text-amber-600/30 text-xs">í†µí•©ì‚¬íšŒ II. ì¸ê°„ê³¼ ê³µë™ì²´ â€” í–‰ë³µ Â· [10í†µì‚¬1-02-01]</div>
</div>

<!-- ===== ì´ë¦„ ì…ë ¥ ===== -->
<div class="screen" id="s-name">
  <div class="flex-1 flex flex-col items-center justify-center p-6 text-center">
    <div class="text-5xl mb-4">âœï¸</div>
    <h2 class="jua text-2xl text-amber-900 mb-2">ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</h2>
    <p class="text-amber-700/60 text-sm mb-6">ê²°ê³¼ì§€ì— í‘œì‹œë©ë‹ˆë‹¤</p>
    <div class="w-72 space-y-3">
      <div class="flex gap-2">
        <input type="text" id="input-grade" placeholder="í•™ë…„" maxlength="1" class="flex-1 text-center py-3 border-2 border-amber-200 rounded-xl focus:border-amber-500 outline-none bg-white font-bold">
        <input type="text" id="input-class" placeholder="ë°˜" maxlength="2" class="flex-1 text-center py-3 border-2 border-amber-200 rounded-xl focus:border-amber-500 outline-none bg-white font-bold">
        <input type="text" id="input-number" placeholder="ë²ˆí˜¸" maxlength="2" class="flex-1 text-center py-3 border-2 border-amber-200 rounded-xl focus:border-amber-500 outline-none bg-white font-bold">
      </div>
      <input type="text" id="user-name" placeholder="ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”" maxlength="10" 
        class="w-full text-center text-xl py-3 px-4 border-2 border-amber-300 rounded-xl focus:border-amber-500 outline-none bg-white font-bold"
        onkeydown="if(event.key==='Enter')submitName()">
    </div>
    <button onclick="submitName()" class="mt-4 py-3 px-10 bg-amber-600 hover:bg-amber-500 text-white rounded-xl font-bold transition-all hover:scale-105">
      ì‹œì‘! â†’
    </button>
  </div>
</div>

<!-- ===== í€´ì¦ˆ í™”ë©´ ===== -->
<div class="screen" id="s-quiz">
  <div class="sticky top-0 z-50 bg-yellow-50/90 backdrop-blur-md border-b border-amber-200 px-4 py-3">
    <div class="max-w-2xl mx-auto">
      <div class="flex justify-between items-center mb-2 text-sm">
        <span class="font-bold text-amber-800">Q<span id="q-num">1</span> / 12</span>
        <span class="text-amber-600/60" id="q-category">ê°€ì¹˜ê´€</span>
      </div>
      <div class="progress-outer"><div class="progress-inner" id="q-progress" style="width:0%"></div></div>
    </div>
  </div>
  <div class="flex-1 p-4 pb-24" id="q-content"></div>
</div>

<!-- ===== ë¶„ì„ ì¤‘ ===== -->
<div class="screen" id="s-loading">
  <div class="flex-1 flex flex-col items-center justify-center p-6 text-center">
    <div class="text-6xl mb-6" style="animation:heartbeat 1s infinite">ğŸ”</div>
    <h2 class="jua text-2xl text-amber-900 mb-3">í–‰ë³µ ë ˆì´ë” ë¶„ì„ ì¤‘...</h2>
    <div class="w-64 progress-outer mb-4"><div class="progress-inner" id="loading-bar" style="width:0%"></div></div>
    <p class="text-amber-700/60 text-sm" id="loading-text">ì‘ë‹µì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤</p>
  </div>
</div>

<!-- ===== ê²°ê³¼ ===== -->
<div class="screen" id="s-result">
  <div class="flex-1 p-4 py-8">
    <div class="result-card" id="result-card">
      <div class="p-6 text-center" id="res-header" style="background:linear-gradient(135deg,#fbbf24,#f59e0b)">
        <div class="text-xs text-amber-100 mb-1">í–‰ë³µ ë ˆì´ë” ì§„ë‹¨ ê²°ê³¼</div>
        <div class="text-5xl mb-2" id="res-emoji">ğŸ˜Š</div>
        <h1 class="jua text-2xl text-white" id="res-name">ê¹€í–‰ë³µ</h1>
        <div class="type-badge bg-white/20 text-white mt-2" id="res-type">í–‰ë³µ ìœ í˜•</div>
      </div>
      
      <div class="p-5">
        <!-- ë ˆì´ë” ì°¨íŠ¸ -->
        <div class="mb-6" style="max-width:320px;margin:0 auto;">
          <canvas id="radarChart"></canvas>
        </div>

        <!-- 6ì¶• ì ìˆ˜ -->
        <div class="grid grid-cols-3 gap-3 mb-6 text-center" id="res-scores"></div>

        <!-- ìœ í˜• ì„¤ëª… -->
        <div class="bg-amber-50 rounded-xl p-4 mb-5">
          <h3 class="font-bold text-amber-800 text-sm mb-2" id="res-type-title">ğŸŒŸ ìœ í˜• ì„¤ëª…</h3>
          <p class="text-sm text-amber-900 leading-relaxed" id="res-type-desc"></p>
        </div>

        <!-- í–‰ë³µ ì¡°ì–¸ -->
        <div class="bg-green-50 rounded-xl p-4 mb-5">
          <h3 class="font-bold text-green-800 text-sm mb-2">ğŸ’¡ í–‰ë³µ ì„±ì¥ í¬ì¸íŠ¸</h3>
          <p class="text-sm text-green-900 leading-relaxed" id="res-advice"></p>
        </div>

        <!-- ë¹„ìŠ·í•œ ìœ ëª…ì¸ -->
        <div class="bg-purple-50 rounded-xl p-4 mb-5">
          <h3 class="font-bold text-purple-800 text-sm mb-2">ğŸŒ ë¹„ìŠ·í•œ ìœ í˜•ì˜ ì‚¬ëŒë“¤</h3>
          <p class="text-sm text-purple-900 leading-relaxed" id="res-famous"></p>
        </div>

        <!-- êµê³¼ì„œ ì—°ê²° -->
        <div class="edu-box mb-4">
          <h3 class="font-bold text-blue-800 text-sm mb-2">ğŸ“š êµê³¼ì„œ ì—°ê²°</h3>
          <div class="text-xs text-blue-700 space-y-1">
            <p><b>ë‹¨ì›:</b> í†µí•©ì‚¬íšŒ II. ì¸ê°„ê³¼ ê³µë™ì²´ â€” í–‰ë³µ</p>
            <p><b>ì„±ì·¨ê¸°ì¤€:</b> [10í†µì‚¬1-02-01] í–‰ë³µì˜ ì˜ë¯¸ì™€ ê¸°ì¤€ì€ ì‹œëŒ€Â·ì‚¬íšŒì— ë”°ë¼ ë‹¤ì–‘í•¨ì„ ì´í•´í•œë‹¤.</p>
            <p><b>í•µì‹¬ ê°œë…:</b> í–‰ë³µì€ ì£¼ê´€ì ì´ë©°, ê°ìì˜ ê°€ì¹˜ê´€Â·ê´€ê³„Â·í™˜ê²½ì— ë”°ë¼ ë‹¤ë¥´ê²Œ ê²½í—˜ë©ë‹ˆë‹¤. ì´ ì§„ë‹¨ì€ 'ë‚˜ì˜ í–‰ë³µì´ ì–´ë–¤ ìš”ì†Œì— ë” ë¯¼ê°í•œì§€'ë¥¼ íƒìƒ‰í•˜ëŠ” í™œë™ì…ë‹ˆë‹¤.</p>
          </div>
        </div>

        <!-- ì‘ë‹µ ìš”ì•½ -->
        <details class="mb-4">
          <summary class="text-xs text-slate-500 cursor-pointer font-bold">ğŸ“‹ ë‚˜ì˜ ì‘ë‹µ ìš”ì•½ ë³´ê¸°</summary>
          <div class="mt-2 space-y-1" id="res-answers"></div>
        </details>

        <div class="text-center text-xs text-slate-400 mt-2">
          <p>í–‰ë³µ ë ˆì´ë” Â· í†µí•©ì‚¬íšŒ Â· ê¹€ìŠ¤ë°ë°˜ T</p>
          <p id="res-date"></p>
        </div>
      </div>
    </div>

    <div class="flex flex-wrap justify-center gap-3 mt-6 max-w-lg mx-auto">
      <button onclick="saveResult()" class="px-6 py-3 bg-amber-600 hover:bg-amber-500 text-white rounded-xl font-bold transition-all hover:scale-105">
        ğŸ“„ ê²°ê³¼ ì €ì¥
      </button>
      <button onclick="location.reload()" class="px-6 py-3 bg-slate-200 hover:bg-slate-300 text-slate-700 rounded-xl font-bold transition-all hover:scale-105">
        ğŸ”„ ë‹¤ì‹œ í•˜ê¸°
      </button>
      <button onclick="exitToBlog()" class="px-6 py-3 bg-emerald-600 hover:bg-emerald-500 text-white rounded-xl font-bold transition-all hover:scale-105">
        ğŸ“ ë¸”ë¡œê·¸ë¡œ ëŒì•„ê°€ê¸°
      </button>
    </div>
  </div>
</div>

<script>
// ===== 6ì¶• ì •ì˜ =====
const AXES = [
  {id:'relation',   label:'ê´€ê³„',  emoji:'ğŸ¤', color:'#ef4444', desc:'ì‚¬ëŒê³¼ì˜ ìœ ëŒ€ì—ì„œ í–‰ë³µì„ ëŠë¼ëŠ” ì •ë„'},
  {id:'growth',     label:'ì„±ì¥',  emoji:'ğŸŒ±', color:'#10b981', desc:'ë°°ì›€ê³¼ ìê¸° ë°œì „ì—ì„œ í–‰ë³µì„ ëŠë¼ëŠ” ì •ë„'},
  {id:'freedom',    label:'ììœ ',  emoji:'ğŸ¦…', color:'#3b82f6', desc:'ììœ¨ì„±ê³¼ ë…ë¦½ì—ì„œ í–‰ë³µì„ ëŠë¼ëŠ” ì •ë„'},
  {id:'stability',  label:'ì•ˆì •',  emoji:'ğŸ ', color:'#8b5cf6', desc:'ì•ˆì „í•˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì‚¶ì—ì„œ í–‰ë³µì„ ëŠë¼ëŠ” ì •ë„'},
  {id:'pleasure',   label:'ì¦ê±°ì›€',emoji:'ğŸ‰', color:'#f59e0b', desc:'ì¾Œë½ê³¼ ì¦ê±°ìš´ ê²½í—˜ì—ì„œ í–‰ë³µì„ ëŠë¼ëŠ” ì •ë„'},
  {id:'meaning',    label:'ì˜ë¯¸',  emoji:'â­', color:'#ec4899', desc:'ì‚¶ì˜ ëª©ì ê³¼ ê°€ì¹˜ì—ì„œ í–‰ë³µì„ ëŠë¼ëŠ” ì •ë„'}
];

// 12ë¬¸í•­ (ë‹¤ì–‘í•œ í˜•ì‹)
const QUESTIONS = [
  { // Q1: 4ì§€ì„ ë‹¤
    type:'select4', category:'ê°€ì¹˜ê´€',
    question:'ì§€ê¸ˆ ë‹¹ì¥ í•˜ë‚˜ë§Œ ì´ë£° ìˆ˜ ìˆë‹¤ë©´?',
    subtext:'ì§ê°ì ìœ¼ë¡œ ê³¨ë¼ë³´ì„¸ìš”',
    options:[
      {emoji:'â¤ï¸',text:'ì†Œì¤‘í•œ ì‚¬ëŒê³¼ ì˜¤ë˜ í•¨ê»˜í•˜ê¸°',axes:{relation:3,meaning:1}},
      {emoji:'ğŸ“',text:'ê¿ˆê¿”ì™”ë˜ ë¶„ì•¼ì˜ ì „ë¬¸ê°€ ë˜ê¸°',axes:{growth:3,meaning:1}},
      {emoji:'âœˆï¸',text:'ì•„ë¬´ ê±±ì • ì—†ì´ ì„¸ê³„ ì—¬í–‰í•˜ê¸°',axes:{freedom:3,pleasure:1}},
      {emoji:'ğŸ¡',text:'ì•ˆì •ì ì¸ ì§ì¥ê³¼ í¸ì•ˆí•œ ì§‘',axes:{stability:3,relation:1}}
    ]
  },
  { // Q2: VS
    type:'vs', category:'ê´€ê³„ vs ììœ ',
    question:'ê¸ˆìš”ì¼ ì €ë…, ë‹¹ì‹ ì˜ ì„ íƒì€?',
    optA:{emoji:'ğŸ•',text:'ì¹œêµ¬ë“¤ê³¼ ì‹œëŒë²…ì í•œ íŒŒí‹°',axes:{relation:3,pleasure:2}},
    optB:{emoji:'ğŸ“–',text:'ë‚˜ë§Œì˜ ì¡°ìš©í•œ íë§ ì‹œê°„',axes:{freedom:3,stability:1}}
  },
  { // Q3: ìŠ¬ë¼ì´ë”
    type:'slider', category:'ì•ˆì • vs ë„ì „',
    question:'ì¸ìƒì—ì„œ ì•ˆì •ê³¼ ë„ì „ ì¤‘ ì–´ë””ì— ê°€ê¹Œìš´ê°€ìš”?',
    leftEmoji:'ğŸ›¡ï¸', leftText:'ì ˆëŒ€ ì•ˆì •!', rightEmoji:'ğŸš€', rightText:'ë¬´ì¡°ê±´ ë„ì „!',
    leftAxes:{stability:3,relation:1}, rightAxes:{growth:3,freedom:1}
  },
  { // Q4: ìƒí™©ê·¹
    type:'scenario', category:'ê°€ì¹˜ê´€',
    scene:{emoji:'ğŸ’°',title:'ë³µê¶Œ ë‹¹ì²¨!',desc:'10ì–µ ì›ì— ë‹¹ì²¨ë˜ì—ˆìŠµë‹ˆë‹¤. ì–´ë–»ê²Œ ì“¸ê¹Œìš”?'},
    options:[
      {emoji:'ğŸ ',text:'ì•ˆì •ì ìœ¼ë¡œ ì €ì¶• + ì§‘ êµ¬ë§¤',sub:'ë¯¸ë˜ë¥¼ ìœ„í•´',axes:{stability:3}},
      {emoji:'ğŸŒ',text:'1ë…„ê°„ ì„¸ê³„ ì—¬í–‰',sub:'ê²½í—˜ì´ ì¬ì‚°',axes:{freedom:2,pleasure:2}},
      {emoji:'ğŸ',text:'ê°€ì¡±ê³¼ ì¹œêµ¬ë“¤ì—ê²Œ ì„ ë¬¼',sub:'ë‚˜ëˆ”ì´ í–‰ë³µ',axes:{relation:3,meaning:1}},
      {emoji:'ğŸ“š',text:'ì‚¬ì—…ì´ë‚˜ ê³µë¶€ì— íˆ¬ì',sub:'ì„±ì¥ì˜ ê¸°íšŒ',axes:{growth:3}}
    ]
  },
  { // Q5: VS
    type:'vs', category:'ì¦ê±°ì›€ vs ì˜ë¯¸',
    question:'ì§ì—…ì„ ê³ ë¥¸ë‹¤ë©´?',
    optA:{emoji:'ğŸ®',text:'ì¬ë¯¸ìˆê³  ì¦ê±°ìš´ ì¼\n(ê²Œì„ ë””ìì´ë„ˆ, ìœ íŠœë²„)',axes:{pleasure:3,freedom:1}},
    optB:{emoji:'ğŸ¥',text:'í˜ë“¤ì§€ë§Œ ì„¸ìƒì— ë„ì›€ì´ ë˜ëŠ” ì¼\n(ì˜ì‚¬, ì†Œë°©ê´€)',axes:{meaning:3,relation:1}}
  },
  { // Q6: 4ì§€ì„ ë‹¤
    type:'select4', category:'í–‰ë³µì˜ ì¡°ê±´',
    question:'ì´ê²ƒë§Œ ìˆìœ¼ë©´ ë§¤ì¼ í–‰ë³µí•  ê²ƒ ê°™ì•„ìš”',
    subtext:'í•˜ë‚˜ë§Œ ê³¨ë¼ì•¼ í•©ë‹ˆë‹¤!',
    options:[
      {emoji:'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦',text:'í•¨ê»˜í•  ì‚¬ëŒë“¤',axes:{relation:3}},
      {emoji:'ğŸ“ˆ',text:'ë§¤ì¼ ì„±ì¥í•˜ëŠ” ëŠë‚Œ',axes:{growth:3}},
      {emoji:'ğŸ¶',text:'ì¢‹ì•„í•˜ëŠ” ê²ƒì„ í•  ììœ ',axes:{freedom:2,pleasure:2}},
      {emoji:'ğŸ”’',text:'ê±±ì • ì—†ëŠ” ì•ˆì •ê°',axes:{stability:3}}
    ]
  },
  { // Q7: ìŠ¬ë¼ì´ë”
    type:'slider', category:'ê°œì¸ vs ê³µë™ì²´',
    question:'í–‰ë³µì€ í˜¼ì ë§Œë“œëŠ” ê²ƒ vs í•¨ê»˜ ë§Œë“œëŠ” ê²ƒ',
    leftEmoji:'ğŸ§˜',leftText:'ë‚˜ í˜¼ìì—¬ë„ í–‰ë³µ',rightEmoji:'ğŸ¤—',rightText:'ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ì—¬ì•¼ í–‰ë³µ',
    leftAxes:{freedom:2,growth:2}, rightAxes:{relation:3,meaning:1}
  },
  { // Q8: ìƒí™©ê·¹
    type:'scenario', category:'ìœ„ê¸° ëŒ€ì‘',
    scene:{emoji:'ğŸ˜°',title:'ìµœì•…ì˜ í•˜ë£¨',desc:'ì‹œí—˜ ë§ì¹˜ê³ , ì¹œêµ¬ì™€ ì‹¸ìš°ê³ , ë¹„ê¹Œì§€ ë‚´ë¦½ë‹ˆë‹¤. ì–´ë–»ê²Œ ë²„í‹¸ê¹Œìš”?'},
    options:[
      {emoji:'ğŸ“',text:'ëˆ„êµ°ê°€ì—ê²Œ ì „í™”í•œë‹¤',sub:'ìœ„ë¡œê°€ í•„ìš”í•´',axes:{relation:3}},
      {emoji:'ğŸƒ',text:'ìš´ë™í•˜ê±°ë‚˜ ê±·ëŠ”ë‹¤',sub:'ëª¸ì„ ì›€ì§ì´ë©´ ë‚˜ì•„ì ¸',axes:{growth:1,freedom:2}},
      {emoji:'ğŸ«',text:'ë§›ìˆëŠ” ê²ƒ ë¨¹ìœ¼ë©° ë„·í”Œë¦­ìŠ¤',sub:'ì¼ë‹¨ ê¸°ë¶„ ì „í™˜!',axes:{pleasure:3}},
      {emoji:'ğŸ““',text:'ì¼ê¸°ë¥¼ ì“°ë©° ì •ë¦¬í•œë‹¤',sub:'ì˜ë¯¸ë¥¼ ì°¾ìœ¼ë©´ ê´œì°®ì•„ì ¸',axes:{meaning:3}}
    ]
  },
  { // Q9: VS
    type:'vs', category:'í˜„ì¬ vs ë¯¸ë˜',
    question:'ì§€ê¸ˆ ì´ ìˆœê°„ vs ë¯¸ë˜ì˜ í° í–‰ë³µ',
    optA:{emoji:'ğŸ°',text:'ì˜¤ëŠ˜ ë§›ìˆëŠ” ê²ƒ ë¨¹ê³ \nì‘ì€ í–‰ë³µ ëˆ„ë¦¬ê¸°',axes:{pleasure:3,freedom:1}},
    optB:{emoji:'ğŸ’ª',text:'ì˜¤ëŠ˜ ì°¸ê³  ë…¸ë ¥í•´ì„œ\në‚˜ì¤‘ì— í° ë³´ëŒ ì–»ê¸°',axes:{growth:2,meaning:2}}
  },
  { // Q10: 4ì§€ì„ ë‹¤
    type:'select4', category:'í–‰ë³µ ì¥ì†Œ',
    question:'ê°€ì¥ í–‰ë³µí•  ê²ƒ ê°™ì€ ì¥ì†ŒëŠ”?',
    subtext:'ìƒìƒë§Œìœ¼ë¡œë„ ê¸°ë¶„ì´ ì¢‹ì•„ì§€ëŠ” ê³³',
    options:[
      {emoji:'ğŸ”ï¸',text:'ì•„ë¬´ë„ ì—†ëŠ” ì‚°ì† ì˜¤ë‘ë§‰',axes:{freedom:3,stability:1}},
      {emoji:'â˜•',text:'ì¹œêµ¬ë“¤ê³¼ ìˆ˜ë‹¤ ë–¨ ìˆ˜ ìˆëŠ” ì¹´í˜',axes:{relation:3,pleasure:1}},
      {emoji:'ğŸ«',text:'ìƒˆë¡œìš´ ê²ƒì„ ë°°ìš°ëŠ” êµì‹¤',axes:{growth:3}},
      {emoji:'ğŸŸï¸',text:'ì‚¬ëŒë“¤ì—ê²Œ ê°ë™ì„ ì£¼ëŠ” ë¬´ëŒ€',axes:{meaning:2,pleasure:2}}
    ]
  },
  { // Q11: ìŠ¬ë¼ì´ë”
    type:'slider', category:'ë¬¼ì§ˆ vs ê²½í—˜',
    question:'ê°–ê³  ì‹¶ì€ ê²ƒ vs í•˜ê³  ì‹¶ì€ ê²ƒ',
    leftEmoji:'ğŸ',leftText:'ì¢‹ì€ ë¬¼ê±´ ê°–ê¸°',rightEmoji:'ğŸª',rightText:'ë©‹ì§„ ê²½í—˜ í•˜ê¸°',
    leftAxes:{stability:2,pleasure:2}, rightAxes:{freedom:2,growth:1,pleasure:1}
  },
  { // Q12: ìƒí™©ê·¹ (ë§ˆì§€ë§‰)
    type:'scenario', category:'ì¸ìƒ ì² í•™',
    scene:{emoji:'ğŸ§“',title:'80ì„¸ì˜ ë‚˜',desc:'80ì„¸ê°€ ëœ ë‚˜ì—ê²Œ ë¬¼ì—ˆìŠµë‹ˆë‹¤. "ì¸ìƒì—ì„œ ê°€ì¥ í–‰ë³µí–ˆë˜ ìˆœê°„ì€?"'},
    options:[
      {emoji:'ğŸ’‘',text:'"ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒë“¤ê³¼ í•¨ê»˜í•œ ìˆœê°„"',sub:'ê´€ê³„ê°€ ì „ë¶€ì˜€ì–´',axes:{relation:4}},
      {emoji:'ğŸ†',text:'"ëª©í‘œë¥¼ ì´ë¤„ëƒˆì„ ë•Œ"',sub:'ë…¸ë ¥ì´ ë¹›ë‚˜ëŠ” ìˆœê°„',axes:{growth:3,meaning:1}},
      {emoji:'ğŸŒ…',text:'"ììœ ë¡­ê²Œ ë– ëŒì•˜ë˜ ì‹œê°„ë“¤"',sub:'ì–´ë””ë“  ê°ˆ ìˆ˜ ìˆì—ˆì§€',axes:{freedom:3,pleasure:1}},
      {emoji:'ğŸ’',text:'"ì„¸ìƒì— ì¢‹ì€ ì˜í–¥ì„ ë‚¨ê¸´ ê²ƒ"',sub:'ì˜ë¯¸ ìˆëŠ” ì‚¶ì´ì—ˆì–´',axes:{meaning:4}}
    ]
  }
];

// ===== ìƒíƒœ =====
let userName = '';
let studentGrade = '', studentClass = '', studentNum = '';
let currentQ = 0;
let scores = {relation:0,growth:0,freedom:0,stability:0,pleasure:0,meaning:0};
let answers = [];

function show(id){document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));document.getElementById(id).classList.add('active');window.scrollTo(0,0);}

function startQuiz(){
  document.documentElement.requestFullscreen().catch(()=>{});
  show('s-name');
  setTimeout(()=>document.getElementById('user-name').focus(),300);
}

function submitName(){
  userName = document.getElementById('user-name').value.trim() || 'ìµëª…';
  studentGrade = document.getElementById('input-grade').value.trim();
  studentClass = document.getElementById('input-class').value.trim();
  studentNum = document.getElementById('input-number').value.trim();
  show('s-quiz');
  renderQuestion();
}

function renderQuestion(){
  if(currentQ >= QUESTIONS.length){showLoading();return;}
  
  const q = QUESTIONS[currentQ];
  document.getElementById('q-num').textContent = currentQ+1;
  document.getElementById('q-category').textContent = q.category;
  document.getElementById('q-progress').style.width = (currentQ/QUESTIONS.length*100)+'%';
  
  const ct = document.getElementById('q-content');
  let html = `<div class="max-w-2xl mx-auto">`;
  html += `<h2 class="jua text-xl md:text-2xl text-center text-amber-900 mb-2 mt-4">${q.question}</h2>`;
  if(q.subtext) html += `<p class="text-center text-amber-600/60 text-sm mb-6">${q.subtext||''}</p>`;
  else html += `<div class="mb-6"></div>`;

  switch(q.type){
    case 'select4':
      html += `<div class="grid grid-cols-2 gap-3">`;
      q.options.forEach((o,i)=>{
        html += `<div class="opt-card" onclick="answer4(${i})">
          <span class="opt-emoji">${o.emoji}</span>
          <div class="opt-text">${o.text}</div>
        </div>`;
      });
      html += `</div>`;
      break;

    case 'vs':
      html += `<div class="flex gap-4 items-stretch">
        <div class="vs-card" onclick="answerVS('A')">
          <div class="text-4xl mb-2">${q.optA.emoji}</div>
          <div class="font-bold text-sm" style="white-space:pre-line">${q.optA.text}</div>
        </div>
        <div class="flex items-center"><span class="jua text-2xl text-amber-400">VS</span></div>
        <div class="vs-card" onclick="answerVS('B')">
          <div class="text-4xl mb-2">${q.optB.emoji}</div>
          <div class="font-bold text-sm" style="white-space:pre-line">${q.optB.text}</div>
        </div>
      </div>`;
      break;

    case 'slider':
      html += `<div class="bg-white rounded-2xl p-6 shadow-sm border border-amber-100">
        <div class="flex justify-between items-center mb-6">
          <div class="text-center"><div class="text-3xl">${q.leftEmoji}</div><div class="text-xs font-bold text-slate-600 mt-1">${q.leftText}</div></div>
          <div class="text-center"><div class="text-3xl">${q.rightEmoji}</div><div class="text-xs font-bold text-slate-600 mt-1">${q.rightText}</div></div>
        </div>
        <input type="range" min="0" max="100" value="50" class="custom-slider" id="slider-input">
        <div class="text-center mt-4">
          <button onclick="answerSlider()" class="py-3 px-10 bg-amber-500 hover:bg-amber-400 text-white rounded-xl font-bold transition-all hover:scale-105">ì„ íƒ ì™„ë£Œ âœ“</button>
        </div>
      </div>`;
      break;

    case 'scenario':
      html += `<div class="scenario-card mb-4">
        <div class="scenario-header">
          <div class="text-3xl">${q.scene.emoji}</div>
          <div><div class="font-bold text-lg">${q.scene.title}</div><div class="text-slate-500 text-sm">${q.scene.desc}</div></div>
        </div>
        <div class="space-y-2">
          ${q.options.map((o,i)=>`
            <div class="opt-card flex items-center gap-3 text-left" onclick="answerScenario(${i})" style="padding:0.8rem 1rem">
              <span style="font-size:1.8rem;flex-shrink:0">${o.emoji}</span>
              <div><div class="opt-text" style="font-size:0.88rem">${o.text}</div><div class="opt-sub">${o.sub}</div></div>
            </div>
          `).join('')}
        </div>
      </div>`;
      break;
  }
  
  html += `</div>`;
  ct.innerHTML = html;
}

function addScores(axes){
  for(const[k,v]of Object.entries(axes)) scores[k]=(scores[k]||0)+v;
}

function answer4(idx){
  const q=QUESTIONS[currentQ];
  addScores(q.options[idx].axes);
  answers.push({q:q.question, a:q.options[idx].text});
  // ì„ íƒ í‘œì‹œ
  document.querySelectorAll('.opt-card')[idx].classList.add('selected');
  setTimeout(()=>{currentQ++;renderQuestion();},400);
}

function answerVS(side){
  const q=QUESTIONS[currentQ];
  const chosen = side==='A' ? q.optA : q.optB;
  addScores(chosen.axes);
  answers.push({q:q.question, a:chosen.text.replace(/\n/g,' ')});
  document.querySelectorAll('.vs-card')[side==='A'?0:1].classList.add('selected');
  setTimeout(()=>{currentQ++;renderQuestion();},400);
}

function answerSlider(){
  const q=QUESTIONS[currentQ];
  const val = parseInt(document.getElementById('slider-input').value);
  const leftW = (100-val)/100, rightW = val/100;
  for(const[k,v]of Object.entries(q.leftAxes)) scores[k]=(scores[k]||0)+v*leftW;
  for(const[k,v]of Object.entries(q.rightAxes)) scores[k]=(scores[k]||0)+v*rightW;
  answers.push({q:q.question, a:val<=30?q.leftText:val>=70?q.rightText:'ì¤‘ê°„'});
  currentQ++;renderQuestion();
}

function answerScenario(idx){
  const q=QUESTIONS[currentQ];
  addScores(q.options[idx].axes);
  answers.push({q:q.question, a:q.options[idx].text});
  document.querySelectorAll('.opt-card')[idx].classList.add('selected');
  setTimeout(()=>{currentQ++;renderQuestion();},400);
}

// ===== ë¡œë”© =====
function showLoading(){
  show('s-loading');
  const texts=['ì‘ë‹µì„ ë¶„ì„í•˜ê³  ìˆìŠµë‹ˆë‹¤','í–‰ë³µ íŒ¨í„´ì„ ì°¾ëŠ” ì¤‘...','ë ˆì´ë” ì°¨íŠ¸ë¥¼ ê·¸ë¦¬ëŠ” ì¤‘...','ìœ í˜•ì„ íŒë³„í•˜ê³  ìˆìŠµë‹ˆë‹¤','ê±°ì˜ ì™„ì„±!'];
  let p=0;
  const bar=document.getElementById('loading-bar');
  const txt=document.getElementById('loading-text');
  const iv=setInterval(()=>{
    p+=20;
    bar.style.width=p+'%';
    txt.textContent=texts[Math.min(Math.floor(p/20),texts.length-1)];
    if(p>=100){clearInterval(iv);setTimeout(showResult,500);}
  },600);
}

// ===== ê²°ê³¼ ê³„ì‚° =====
const TYPES = [
  {id:'connector',emoji:'ğŸ¤—',name:'ë”°ëœ»í•œ ì—°ê²°ì',primary:'relation',
   desc:'ì‚¬ëŒë“¤ê³¼ì˜ ê´€ê³„ì—ì„œ ê°€ì¥ í° í–‰ë³µì„ ëŠë¼ëŠ” ìœ í˜•ì…ë‹ˆë‹¤. ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒê³¼ í•¨ê»˜í•˜ëŠ” ì‹œê°„ì´ ë¬´ì—‡ë³´ë‹¤ ì†Œì¤‘í•˜ê³ , ëˆ„êµ°ê°€ë¥¼ ë•ê±°ë‚˜ ìœ„ë¡œí•  ë•Œ ë§ˆìŒì´ ë”°ëœ»í•´ì§‘ë‹ˆë‹¤.',
   advice:'í˜¼ìë§Œì˜ ì‹œê°„ë„ ì†Œì¤‘íˆ ì—¬ê²¨ë³´ì„¸ìš”. ê´€ê³„ì— ì—ë„ˆì§€ë¥¼ ìŸë‹¤ ë³´ë©´ ë‚˜ ìì‹ ì„ ëŒë³´ëŠ” ê±¸ ìŠê¸° ì‰½ìŠµë‹ˆë‹¤. ì¼ì£¼ì¼ì— í•˜ë£¨ëŠ” "ë‚˜ë¥¼ ìœ„í•œ ì‹œê°„"ì„ ë§Œë“¤ì–´ë³´ëŠ” ê±´ ì–´ë–¨ê¹Œìš”?',
   famous:'ê°„ë””, í…Œë ˆì‚¬ ìˆ˜ë…€, BTS RM â€” ê´€ê³„ì™€ ê³µê°ì„ í†µí•´ ì„¸ìƒì„ ë°”ê¾¸ëŠ” ì‚¬ëŒë“¤'},
  {id:'explorer',emoji:'ğŸ¦…',name:'ììœ ë¡œìš´ íƒí—˜ê°€',primary:'freedom',
   desc:'ììœ ì™€ ë…ë¦½ì„ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ì—¬ê¸°ëŠ” ìœ í˜•ì…ë‹ˆë‹¤. ê·œì¹™ì— ì–½ë§¤ì´ëŠ” ê²ƒì„ ì‹«ì–´í•˜ê³ , ìê¸°ë§Œì˜ ë°©ì‹ìœ¼ë¡œ ì‚´ì•„ê°€ëŠ” ê²ƒì—ì„œ í–‰ë³µì„ ëŠë‚ë‹ˆë‹¤.',
   advice:'ììœ ë¥¼ ì¶”êµ¬í•˜ë©´ì„œë„ ê¾¸ì¤€í•¨ì˜ ê°€ì¹˜ë¥¼ ìŠì§€ ë§ˆì„¸ìš”. ë•Œë¡œëŠ” í•œ ê³³ì— ê¹Šì´ ë¿Œë¦¬ë‚´ë¦¬ëŠ” ê²ƒì—ì„œë„ í° í–‰ë³µì´ ì˜µë‹ˆë‹¤.',
   famous:'ì²´ ê²Œë°”ë¼, ì´ì†Œë£¡, ì§€ì½” â€” ìê¸°ë§Œì˜ ê¸¸ì„ ê°œì²™í•œ ììœ ë¡œìš´ ì˜í˜¼ë“¤'},
  {id:'grower',emoji:'ğŸŒ±',name:'ëŠì„ì—†ëŠ” ì„±ì¥ëŸ¬',primary:'growth',
   desc:'ë°°ì›€ê³¼ ì„±ì¥ì—ì„œ ê°€ì¥ í° ë§Œì¡±ì„ ëŠë¼ëŠ” ìœ í˜•ì…ë‹ˆë‹¤. ì–´ì œë³´ë‹¤ ë‚˜ì€ ì˜¤ëŠ˜ì„ ì‚´ê³  ì‹¶ê³ , ìƒˆë¡œìš´ ë„ì „ì´ ì‚¶ì˜ ì›ë™ë ¥ì…ë‹ˆë‹¤.',
   advice:'ì™„ë²½ì£¼ì˜ì— ë¹ ì§€ì§€ ì•Šë„ë¡ ì£¼ì˜í•˜ì„¸ìš”. ì„±ì¥ì€ ì§ì„ ì´ ì•„ë‹ˆë¼ ê³¡ì„ ì…ë‹ˆë‹¤. ë•Œë¡œëŠ” ë©ˆì¶”ê³  ì§€ê¸ˆì˜ ë‚˜ë¥¼ ì¸ì •í•˜ëŠ” ê²ƒë„ ì„±ì¥ì…ë‹ˆë‹¤.',
   famous:'ì¼ë¡  ë¨¸ìŠ¤í¬, ê¹€ì—°ì•„, ìœ í€´ì¦ˆ ìœ ì¬ì„ â€” ëŠì„ì—†ì´ ìì‹ ì„ ë°œì „ì‹œí‚¤ëŠ” ì‚¬ëŒë“¤'},
  {id:'guardian',emoji:'ğŸ ',name:'ë“ ë“ í•œ ì•ˆì •íŒŒ',primary:'stability',
   desc:'ì•ˆì „í•˜ê³  ì˜ˆì¸¡ ê°€ëŠ¥í•œ ì‚¶ì—ì„œ í–‰ë³µì„ ëŠë¼ëŠ” ìœ í˜•ì…ë‹ˆë‹¤. ê°€ê¹Œìš´ ì‚¬ëŒë“¤ê³¼ í¸ì•ˆí•œ ì¼ìƒì„ ìœ ì§€í•˜ëŠ” ê²ƒì´ ê°€ì¥ í° í–‰ë³µì…ë‹ˆë‹¤.',
   advice:'ê°€ë”ì€ ìµìˆ™í•œ ì˜ì—­ ë°–ìœ¼ë¡œ ë‚˜ê°€ë³´ì„¸ìš”. ì‘ì€ ëª¨í—˜ì´ ì˜ˆìƒì¹˜ ëª»í•œ í° í–‰ë³µì„ ê°€ì ¸ë‹¤ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.',
   famous:'ì›ŒëŸ° ë²„í•, ë°±ì¢…ì›, ì´ì˜ì â€” ê¾¸ì¤€í•¨ê³¼ ì•ˆì • ì†ì—ì„œ í° ì„±ì·¨ë¥¼ ì´ë£¬ ì‚¬ëŒë“¤'},
  {id:'hedonist',emoji:'ğŸ‰',name:'ì§€ê¸ˆ ì´ ìˆœê°„íŒŒ',primary:'pleasure',
   desc:'ì¦ê±°ì›€ê³¼ ì¾Œë½ì—ì„œ í–‰ë³µì„ ì°¾ëŠ” ìœ í˜•ì…ë‹ˆë‹¤. ë§›ìˆëŠ” ìŒì‹, ì‹ ë‚˜ëŠ” ìŒì•…, ì¬ë¯¸ìˆëŠ” ê²½í—˜ì´ ì‚¶ì„ ë¹›ë‚˜ê²Œ í•©ë‹ˆë‹¤.',
   advice:'ìˆœê°„ì˜ ì¦ê±°ì›€ë„ ì¢‹ì§€ë§Œ, ì¥ê¸°ì ì¸ ëª©í‘œë„ í•¨ê»˜ ì„¸ì›Œë³´ì„¸ìš”. "ë¯¸ë˜ì˜ ë‚˜ì—ê²Œ ì£¼ëŠ” ì„ ë¬¼"ì„ ìƒê°í•˜ë©´ ê· í˜•ì´ ë§ì•„ì§‘ë‹ˆë‹¤.',
   famous:'ì‹¸ì´, ë‚˜ì˜ì„ PD, ë°•ë‚˜ë˜ â€” ì‚¶ì„ ì¦ê¸°ë©´ì„œë„ ìê¸° ë¶„ì•¼ì—ì„œ ì„±ê³¼ë¥¼ ë‚´ëŠ” ì‚¬ëŒë“¤'},
  {id:'philosopher',emoji:'â­',name:'ì˜ë¯¸ë¥¼ ì°¾ëŠ” ì² í•™ì',primary:'meaning',
   desc:'ì‚¶ì˜ ëª©ì ê³¼ ê°€ì¹˜ì—ì„œ ê¹Šì€ í–‰ë³µì„ ëŠë¼ëŠ” ìœ í˜•ì…ë‹ˆë‹¤. ë‹¨ìˆœí•œ ì¦ê±°ì›€ë³´ë‹¤ "ì™œ ì‚¬ëŠ”ê°€"ì— ëŒ€í•œ ë‹µì„ ì°¾ì„ ë•Œ ì¶©ë§Œí•´ì§‘ë‹ˆë‹¤.',
   advice:'ì˜ë¯¸ë¥¼ ë„ˆë¬´ ë¬´ê²ê²Œ ì§Šì–´ì§€ì§€ ë§ˆì„¸ìš”. ì‘ì€ ì¼ìƒ ì†ì—ì„œë„ ì˜ë¯¸ëŠ” ë°œê²¬ë©ë‹ˆë‹¤. ê°€ë²¼ìš´ ì›ƒìŒë„ ì‚¶ì˜ ì†Œì¤‘í•œ ë¶€ë¶„ì…ë‹ˆë‹¤.',
   famous:'ìœ ë°œ í•˜ë¼ë¦¬, ê¹€ìˆ˜ì˜, ì•„ì´ìœ  â€” ê¹Šì€ ì‚¬ìœ ì™€ ë©”ì‹œì§€ë¥¼ ì „í•˜ëŠ” ì‚¬ëŒë“¤'}
];

function showResult(){
  // ìµœê³  ì¶• ì°¾ê¸°
  let maxAxis = 'relation', maxVal = 0;
  for(const ax of AXES){
    if(scores[ax.id] > maxVal){maxVal=scores[ax.id];maxAxis=ax.id;}
  }
  
  const type = TYPES.find(t=>t.primary===maxAxis) || TYPES[0];
  
  document.getElementById('res-emoji').textContent = type.emoji;
  document.getElementById('res-name').textContent = `${studentGrade?studentGrade+'í•™ë…„ ':''}${studentClass?studentClass+'ë°˜ ':''}${userName}ë‹˜ì˜ í–‰ë³µ ë ˆì´ë”`;
  document.getElementById('res-type').textContent = type.name;
  document.getElementById('res-type-title').textContent = `ğŸŒŸ ${type.name}`;
  document.getElementById('res-type-desc').textContent = type.desc;
  document.getElementById('res-advice').textContent = type.advice;
  document.getElementById('res-famous').textContent = type.famous;
  document.getElementById('res-date').textContent = new Date().toLocaleDateString('ko-KR') + ' ì§„ë‹¨';
  
  // í—¤ë” ìƒ‰ìƒ
  const colors = {relation:'#ef4444',growth:'#10b981',freedom:'#3b82f6',stability:'#8b5cf6',pleasure:'#f59e0b',meaning:'#ec4899'};
  document.getElementById('res-header').style.background = `linear-gradient(135deg,${colors[maxAxis]},${colors[maxAxis]}cc)`;
  
  // ì ìˆ˜ í‘œì‹œ
  const maxPossible = Math.max(...Object.values(scores)) || 1;
  const scoresEl = document.getElementById('res-scores');
  scoresEl.innerHTML = AXES.map(ax=>{
    const pct = Math.round(scores[ax.id]/maxPossible*100);
    return `<div class="rounded-xl p-3" style="background:${ax.color}10;border:1px solid ${ax.color}30">
      <div class="text-2xl">${ax.emoji}</div>
      <div class="font-black text-lg" style="color:${ax.color}">${pct}%</div>
      <div class="text-xs font-bold" style="color:${ax.color}">${ax.label}</div>
    </div>`;
  }).join('');
  
  // ë ˆì´ë” ì°¨íŠ¸
  const ctx = document.getElementById('radarChart').getContext('2d');
  const radarData = AXES.map(ax=> Math.round(scores[ax.id]/maxPossible*100));
  new Chart(ctx,{
    type:'radar',
    data:{
      labels:AXES.map(ax=>`${ax.emoji} ${ax.label}`),
      datasets:[{
        data:radarData,
        backgroundColor:'rgba(245,158,11,0.2)',
        borderColor:'#f59e0b',
        borderWidth:2,
        pointBackgroundColor:AXES.map(ax=>ax.color),
        pointBorderColor:'#fff',
        pointBorderWidth:2,
        pointRadius:5
      }]
    },
    options:{
      responsive:true,
      plugins:{legend:{display:false}},
      scales:{r:{
        min:0,max:100,
        ticks:{stepSize:25,font:{size:9},backdropColor:'transparent'},
        pointLabels:{font:{size:11,weight:'bold'}},
        grid:{color:'#e5e7eb'}
      }}
    }
  });
  
  // ì‘ë‹µ ìš”ì•½
  document.getElementById('res-answers').innerHTML = answers.map((a,i)=>
    `<div style="font-size:0.75rem;padding:6px 10px;background:#f9fafb;border-radius:8px;color:#6b7280;">
      <b>Q${i+1}.</b> ${a.q} â†’ <span style="color:#1e293b">${a.a}</span>
    </div>`
  ).join('');
  
  missionComplete=true;
  if(document.fullscreenElement)document.exitFullscreen().catch(()=>{});
  show('s-result');
}

function saveResult(){
  const card = document.getElementById('result-card');
  html2canvas(card,{scale:2,backgroundColor:'#ffffff',useCORS:true}).then(canvas=>{
    const link=document.createElement('a');
    link.download=`í–‰ë³µë ˆì´ë”_${userName}_${new Date().toISOString().slice(0,10)}.png`;
    link.href=canvas.toDataURL('image/png');
    link.click();
  }).catch(()=>alert('ì €ì¥ ì‹¤íŒ¨. ìŠ¤í¬ë¦°ìƒ·ì„ ì´ìš©í•´ì£¼ì„¸ìš”.'));
}

function exitToBlog(){
  missionComplete = true;
  if(document.fullscreenElement)document.exitFullscreen().catch(()=>{});
  if(document.referrer&&document.referrer.includes('blogspot'))window.location.href=document.referrer;
  else window.history.back();
}
// ===== ì „ì²´í™”ë©´ ê°€ë“œ =====
let missionComplete = false;
let isReEntering = false;

function reEnterFullscreen(){
  isReEntering = true;
  document.getElementById('fs-warning').style.display = 'none';
  document.documentElement.requestFullscreen().catch(()=>{isReEntering=false;});
}

document.addEventListener('fullscreenchange', () => {
  if(!document.fullscreenElement && !missionComplete && !isReEntering){
    const cur = document.querySelector('.screen.active');
    if(cur && cur.id !== 's-start' && cur.id !== 's-intro'){
      document.getElementById('fs-warning').style.display = 'flex';
    }
  }
  if(document.fullscreenElement){
    isReEntering = false;
    document.getElementById('fs-warning').style.display = 'none';
  }
});

}
</script>
<!-- ì „ì²´í™”ë©´ ì´íƒˆ ê²½ê³  ì˜¤ë²„ë ˆì´ -->
<div class="fs-warning-overlay" id="fs-warning" style="display:none">
  <div class="warn-icon">âš ï¸</div>
  <div class="warn-title">ë¯¸ì…˜ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤!</div>
  <div class="warn-msg">ì „ì²´í™”ë©´ì„ ìœ ì§€í•´ì•¼ ë¯¸ì…˜ì„ ê³„ì†í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>ë‹¤ì‹œ ì „ì²´í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ì„¸ìš”.</div>
  <button class="warn-btn" onclick="reEnterFullscreen()">ğŸ”’ ì „ì²´í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
</div>
<!-- ë¸”ë¡œê·¸ ë§í¬ ë°°ì§€ -->
<a href="https://ssam-ssong.blogspot.com" target="_blank" class="blog-badge">âœï¸ í’€ì–´ì“°ëŠ” ì‚¬íšŒí•™</a>
</body>
</html>
